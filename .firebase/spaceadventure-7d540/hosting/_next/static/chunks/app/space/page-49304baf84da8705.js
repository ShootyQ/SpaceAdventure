(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[514],{5551:function(e,t,s){Promise.resolve().then(s.bind(s,6875))},6875:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var a=s(3827),r=s(4090),l=s(8792),n=s(3616),o=s(8025);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(7461).Z)("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);var c=s(3879),d=s(2220),u=s(5879),h=s(6260),m=s(6678),x=s(7907),p=s(1657);function f(){let{user:e,userData:t,signInWithGoogle:s,signInStudent:f,loading:g}=(0,m.useAuth)(),v=(0,x.useRouter)(),[w,y]=(0,r.useState)("selection"),[j,N]=(0,r.useState)({username:"",classCode:"",password:""}),[k,C]=(0,r.useState)(""),[S,Z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{!g&&t&&("pending_approval"===t.status?v.push("/pending"):"teacher"===t.role?v.push("/teacher"):"student"===t.role&&v.push("/student"))},[t,g,v]);let L=async e=>{e.preventDefault(),C(""),Z(!0);try{let e="".concat(j.username,".").concat(j.classCode,"@spaceadventure.local");await f(e,j.password)}catch(e){console.error(e),C("Invalid login credentials.")}finally{Z(!1)}};return(0,a.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-between relative overflow-hidden bg-slate-950 text-white",children:[(0,a.jsxs)("div",{className:"fixed inset-0 z-0 pointer-events-none",children:[(0,a.jsx)("div",{id:"stars",className:"stars"}),(0,a.jsx)("div",{id:"stars2",className:"stars2"}),(0,a.jsx)("div",{id:"stars3",className:"stars3"})]}),(0,a.jsxs)("div",{className:"z-10 flex flex-col items-center justify-center w-full min-h-screen text-center px-4 py-12",children:[(0,a.jsx)("div",{className:"animate-float mb-8",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -inset-1 rounded-full bg-blue-500 opacity-25 blur-xl animate-pulse"}),(0,a.jsx)("img",{src:(0,p.K)("/images/ships/finalship.png"),alt:"Space Adventure",className:"w-32 h-32 object-contain relative z-10 transform -rotate-45"})]})}),(0,a.jsx)("h1",{className:"text-5xl md:text-7xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-200 via-white to-blue-200 mb-6 drop-shadow-[0_0_15px_rgba(255,255,255,0.5)]",children:"Space Adventure"}),(0,a.jsx)("p",{className:"text-blue-100 text-xl md:text-2xl max-w-2xl mb-12",children:"Your classroom, gamified. Explore the cosmos, earn ranks, and master your mission."}),g?(0,a.jsx)("div",{className:"text-blue-300 animate-pulse text-lg",children:"Initializing Navigation Systems..."}):t?(0,a.jsx)("div",{className:"text-xl text-green-400 font-mono animate-pulse",children:"Credentials Verified. Launching..."}):(0,a.jsx)("div",{className:"w-full max-w-md bg-slate-900/60 backdrop-blur-md border border-slate-700/50 rounded-2xl p-8 shadow-2xl transition-all",children:"selection"===w?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"text-left mb-2",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-200",children:"Identify Yourself"})}),(0,a.jsxs)("button",{onClick:s,className:"w-full group relative flex items-center justify-between bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-500 hover:to-blue-500 text-white p-4 rounded-xl font-semibold transition-all hover:scale-[1.02] shadow-lg shadow-indigo-500/25",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,a.jsx)(n.Z,{className:"w-5 h-5"})}),(0,a.jsx)("span",{className:"text-lg",children:"Teacher Login"})]}),(0,a.jsx)(o.Z,{className:"w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity transform group-hover:translate-x-1"})]}),(0,a.jsxs)("div",{className:"relative py-2",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-slate-800"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-xs uppercase tracking-widest",children:(0,a.jsx)("span",{className:"px-2 bg-slate-900 text-slate-500",children:"or"})})]}),(0,a.jsxs)("button",{onClick:()=>y("student"),className:"w-full group relative flex items-center justify-between bg-slate-800 hover:bg-slate-700 text-white p-4 rounded-xl font-semibold transition-all hover:scale-[1.02] border border-slate-700 hover:border-slate-600",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-2 bg-slate-700 group-hover:bg-slate-600 rounded-lg",children:(0,a.jsx)(i,{className:"w-5 h-5 text-green-400"})}),(0,a.jsx)("span",{className:"text-lg",children:"Student Access"})]}),(0,a.jsx)(o.Z,{className:"w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity transform group-hover:translate-x-1"})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-white/10 text-center",children:[(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-3",children:"New to Command?"}),(0,a.jsx)(l.default,{href:"/start",className:"inline-block px-6 py-2 rounded-full border border-cyan-500/30 text-cyan-400 hover:bg-cyan-950/50 hover:text-white transition-all text-sm font-bold uppercase tracking-wider",children:"Application for Commission"})]})]}):(0,a.jsxs)("form",{onSubmit:L,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Student Login"}),(0,a.jsx)("button",{type:"button",onClick:()=>y("selection"),className:"text-slate-400 hover:text-white transition-colors",children:(0,a.jsx)(c.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-xs uppercase tracking-wider font-medium text-slate-400 mb-1.5",children:"Class Code"}),(0,a.jsx)("input",{type:"text",required:!0,value:j.classCode,onChange:e=>N({...j,classCode:e.target.value.toUpperCase()}),className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white placeholder-slate-600 font-mono transition-all",placeholder:"ABCD12",maxLength:6})]}),(0,a.jsxs)("div",{className:"flex-[2]",children:[(0,a.jsx)("label",{className:"block text-xs uppercase tracking-wider font-medium text-slate-400 mb-1.5",children:"Username"}),(0,a.jsx)("input",{type:"text",required:!0,value:j.username,onChange:e=>N({...j,username:e.target.value.toLowerCase().replace(/[^a-z0-9]/g,"")}),className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white placeholder-slate-600 transition-all",placeholder:"cadet"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs uppercase tracking-wider font-medium text-slate-400 mb-1.5",children:"Password"}),(0,a.jsx)("input",{type:"password",required:!0,value:j.password,onChange:e=>N({...j,password:e.target.value}),className:"w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white placeholder-slate-600 transition-all",placeholder:""})]}),k&&(0,a.jsx)("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm text-center animate-shake",children:k}),(0,a.jsx)("button",{type:"submit",disabled:S,className:"w-full bg-green-600 hover:bg-green-500 disabled:opacity-50 disabled:cursor-not-allowed text-white p-3 rounded-xl font-bold transition-all mt-4 hover:shadow-lg hover:shadow-green-500/20 text-lg",children:S?"Authenticating...":"Launch Mission"})]})})]}),(0,a.jsxs)("div",{className:"z-10 w-full max-w-6xl px-4 py-20 border-t border-white/10 bg-black/20 backdrop-blur-sm",children:[(0,a.jsx)("h3",{className:"text-3xl font-bold text-center text-white mb-16",children:"System Features"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,a.jsx)(b,{icon:(0,a.jsx)(d.Z,{}),title:"Cosmos Map",description:"Visualize class progress as you travel from planet to planet."}),(0,a.jsx)(b,{icon:(0,a.jsx)(u.Z,{}),title:"XP & Ranks",description:"Earn XP for behavior and assignments to rank up locally."}),(0,a.jsx)(b,{icon:(0,a.jsx)(h.Z,{}),title:"Loot & Rewards",description:"Unlock ship parts and earn real classroom rewards."})]})]}),(0,a.jsxs)("footer",{className:"z-10 w-full py-6 text-center text-blue-500/40 text-sm",children:["Mission Control Systems \xa9 ",new Date().getFullYear()]})]})}function b(e){let{icon:t,title:s,description:r}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center text-center p-6 rounded-xl bg-white/5 border border-white/10",children:[(0,a.jsx)("div",{className:"mb-4 text-yellow-400 p-3 bg-yellow-400/10 rounded-full",children:t}),(0,a.jsx)("h4",{className:"text-xl font-bold text-white mb-2",children:s}),(0,a.jsx)("p",{className:"text-gray-400",children:r})]})}},6678:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return u},useAuth:function(){return h}});var a=s(3827),r=s(4090),l=s(7065),n=s(8121),o=s(4499),i=s(7907),c=s(1657);let d=(0,r.createContext)({});function u(e){let{children:t}=e,[s,u]=(0,r.useState)(null),[h,m]=(0,r.useState)(null),[x,p]=(0,r.useState)(!0),f=(0,i.useRouter)();(0,r.useEffect)(()=>{let e=(0,l.Aj)(o.I8,async e=>{if(u(e),e)try{let s=(0,n.JU)(o.db,"users",e.uid),a=await (0,n.QT)(s);if(a.exists()){let t=a.data(),r="andrewpcarlson85@gmail.com"===e.email,l={};if(r&&"teacher"!==t.role&&(console.log("Fixing Admin Role for Legacy User"),t.role="teacher",l.role="teacher"),"teacher"===t.role&&!t.classCode){console.log("Generating Class Code for existing teacher");let e=(0,c.a)();t.classCode=e,l.classCode=e}if(Object.keys(l).length>0)try{await (0,n.pl)(s,l,{merge:!0})}catch(e){console.warn("Could not update user profile in DB",e)}m(t)}else{var t;e.email;let a={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:"teacher",classCode:(0,c.a)(),status:"active",subscriptionStatus:"trial",schoolName:"",location:"earth",spaceship:{name:"SS "+((null===(t=e.displayName)||void 0===t?void 0:t.split(" ")[0])||"Voyager"),color:"text-blue-400",type:"scout",speed:1}};await (0,n.pl)(s,a),m(a)}}catch(t){console.error("Error fetching user data",t),"andrewpcarlson85@gmail.com"===e.email&&(console.log("Using Fallback Admin Profile due to DB error"),m({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:"teacher",status:"active",location:"earth",xp:9999,spaceship:{name:"SS Command (Fallback)",color:"text-yellow-400",type:"fighter",speed:2}}))}else m(null);p(!1)});return()=>e()},[]);let b=async()=>{try{await (0,l.rh)(o.I8,o.Vv)}catch(e){console.error("Login failed",e)}},g=async(e,t)=>{try{await (0,l.e5)(o.I8,e,t)}catch(e){throw console.error("Student Login Failed",e),e}},v=async()=>{await (0,l.w7)(o.I8),m(null),f.push("/")};return(0,a.jsx)(d.Provider,{value:{user:s,userData:h,loading:x,signInWithGoogle:b,signInStudent:g,logout:v},children:t})}let h=()=>(0,r.useContext)(d)},4499:function(e,t,s){"use strict";s.d(t,{I8:function(){return d},Vv:function(){return u},db:function(){return c},qe:function(){return o}});var a=s(6142),r=s(8121),l=s(7065),n=s(3493);let o={apiKey:"AIzaSyDVHiiCHkP-RFOI26cIrD_OijLnw1r3B8Q",authDomain:"spaceadventure-7d540.firebaseapp.com",projectId:"spaceadventure-7d540",storageBucket:"spaceadventure-7d540.firebasestorage.app",messagingSenderId:"546441300465",appId:"1:546441300465:web:28ae387d2bdbb8011a1c50",measurementId:"G-8R9PYL00XH"},i=(0,a.C6)().length>0?(0,a.Mq)():(0,a.ZF)(o),c=(0,r.ad)(i),d=(0,l.v0)(i),u=new l.hJ;(0,n.Gb)().then(e=>{e&&(0,n.IH)(i)})},1657:function(e,t,s){"use strict";s.d(t,{K:function(){return a},a:function(){return r}});let a=e=>{let t=e.startsWith("/")?e:"/".concat(e);return window.location.hostname.includes("github.io")?"https://shootyq.github.io/SpaceAdventure".concat(t):"".concat("").concat(t)},r=()=>{let e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",t="";for(let s=0;s<6;s++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}},7461:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(4090),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let s=(0,a.forwardRef)((s,n)=>{let{color:o="currentColor",size:i=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:h,...m}=s;return(0,a.createElement)("svg",{ref:n,...r,width:i,height:i,stroke:o,strokeWidth:d?24*Number(c)/Number(i):c,className:["lucide","lucide-".concat(l(e)),u].join(" "),...m},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(h)?h:[h]])});return s.displayName="".concat(e),s}},3879:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8025:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},2220:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]])},3616:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]])},5879:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},6260:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},8792:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var a=s(5250),r=s.n(a)},7907:function(e,t,s){"use strict";var a=s(5313);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[358,38,911,250,971,69,744],function(){return e(e.s=5551)}),_N_E=e.O()}]);