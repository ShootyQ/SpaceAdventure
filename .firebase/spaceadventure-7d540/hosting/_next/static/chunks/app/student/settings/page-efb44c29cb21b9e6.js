(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[204],{8102:function(e,a,t){Promise.resolve().then(t.bind(t,4194))},4194:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return M}});var r=t(3827),l=t(4090),i=t(6678),s=t(8121),n=t(4499),o=t(1828),c=t(1213),d=t(8943),u=t(5032),x=t(1165),g=t(9496),h=t(2882),p=t(7913),m=t(7404),b=t(3276),v=t(2220),f=t(7326),j=t(699),y=t(3879),w=t(5423),N=t(1657),k=t(5802),S=t(8792),C=t(8371),H=t(8745);let _=e=>{let{size:a=24,className:t=""}=e;return(0,r.jsx)("img",{src:(0,N.K)("/images/ships/finalship.png"),alt:"Rocket",className:"object-contain ".concat(t),style:{width:a,height:a}})},P=[{name:"Nebula Blue",class:"text-blue-400",bg:"bg-blue-400"},{name:"Mars Red",class:"text-red-400",bg:"bg-red-400"},{name:"Emerald",class:"text-green-400",bg:"bg-green-400"},{name:"Starlight Gold",class:"text-yellow-400",bg:"bg-yellow-400"},{name:"Void Purple",class:"text-purple-400",bg:"bg-purple-400"},{name:"Ice Cyan",class:"text-cyan-400",bg:"bg-cyan-400"}],I=e=>{let{icon:a,label:t,level:l=0,active:i=!1}=e;return(0,r.jsxs)("div",{className:"aspect-square rounded-xl flex flex-col items-center justify-center p-4 border transition-all cursor-pointer ".concat(i?"bg-cyan-500/20 border-cyan-400":"bg-black/40 border-cyan-900/40 hover:border-cyan-500/50 hover:bg-cyan-900/20"),children:[(0,r.jsx)(a,{size:24,className:"mb-2 ".concat(i?"text-cyan-300":"text-cyan-700")}),(0,r.jsx)("div",{className:"text-[10px] uppercase font-bold text-center tracking-wider ".concat(i?"text-cyan-100":"text-cyan-800"),children:t}),(0,r.jsx)("div",{className:"flex gap-1 mt-2",children:[void 0,void 0,void 0].map((e,a)=>(0,r.jsx)("div",{className:"w-1.5 h-1.5 rounded-full ".concat(a<l?"bg-cyan-400 shadow-[0_0_5px_currentColor]":"bg-cyan-950")},a))})]})},L=e=>{let{config:a}=e,t=e=>({red:"#ef4444",blue:"#3b82f6",green:"#22c55e",yellow:"#eab308",purple:"#a855f7",black:"#171717",white:"#f8fafc",orange:"#f97316"})[e]||"#3b82f6",l=t(a.primaryColor),i=t(a.secondaryColor),s="clip-".concat(a.primaryColor,"-").concat(a.secondaryColor,"-").concat(a.pattern,"-").concat(a.shape).replace(/[^a-z0-9]/gi,"");return(0,r.jsxs)("svg",{width:"24",height:"30",viewBox:"0 0 24 30",className:"drop-shadow-md",children:[(0,r.jsx)("rect",{x:"2",y:"2",width:"2",height:"28",rx:"1",fill:{silver:"#cbd5e1",gold:"#eab308",wood:"#854d0e",black:"#262626"}[a.pole]||"#cbd5e1"}),(0,r.jsxs)("g",{transform:"translate(4, 3)",children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("clipPath",{id:s,children:["rectangle"===a.shape&&(0,r.jsx)("rect",{x:"0",y:"0",width:"20",height:"12"}),"pennant"===a.shape&&(0,r.jsx)("polygon",{points:"0,0 20,6 0,12"}),"triangle"===a.shape&&(0,r.jsx)("polygon",{points:"0,0 20,0 10,12 0,0"}),"swallowtail"===a.shape&&(0,r.jsx)("polygon",{points:"0,0 20,0 20,12 10,6 0,12"})]})}),(0,r.jsxs)("g",{clipPath:"url(#".concat(s,")"),children:["solid"===a.pattern&&(0,r.jsx)("rect",{x:"0",y:"0",width:"20",height:"12",fill:l}),"stripe-h"===a.pattern&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"20",height:"12",fill:l}),(0,r.jsx)("rect",{x:"0",y:"6",width:"20",height:"6",fill:i})]}),"stripe-v"===a.pattern&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"20",height:"12",fill:l}),(0,r.jsx)("rect",{x:"10",y:"0",width:"10",height:"12",fill:i})]}),"cross"===a.pattern&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"20",height:"12",fill:l}),(0,r.jsx)("rect",{x:"8",y:"0",width:"4",height:"12",fill:i}),(0,r.jsx)("rect",{x:"0",y:"4",width:"20",height:"4",fill:i})]}),"circle"===a.pattern&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"20",height:"12",fill:l}),(0,r.jsx)("circle",{cx:"10",cy:"6",r:"4",fill:i})]}),"checkered"===a.pattern&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"10",height:"6",fill:l}),(0,r.jsx)("rect",{x:"10",y:"0",width:"10",height:"6",fill:i}),(0,r.jsx)("rect",{x:"0",y:"6",width:"10",height:"6",fill:i}),(0,r.jsx)("rect",{x:"10",y:"6",width:"10",height:"6",fill:l})]})]})]})]})};function z(e){var a,t,l,s,n,h;let{onNavigate:p,ranks:m}=e,{userData:b}=(0,i.useAuth)(),v=[{id:"ship",title:"Hangar Bay",icon:_,color:"text-cyan-400",border:"border-cyan-500",bg:"bg-cyan-950/30"},{id:"inventory",title:"Cargo Hold",icon:o.Z,color:"text-amber-400",border:"border-amber-500",bg:"bg-amber-950/30"},{id:"avatar",title:"Pilot Profile",icon:c.Z,color:"text-purple-400",border:"border-purple-500",bg:"bg-purple-950/30"},{id:"flag",title:"Flag Designer",icon:d.Z,color:"text-red-400",border:"border-red-500",bg:"bg-red-950/30"}],f=(null==b?void 0:b.xp)||0,j=[...m].sort((e,a)=>e.minXP-a.minXP),y=j.slice().reverse().find(e=>f>=e.minXP)||j[0]||{name:"Recruit",minXP:0},w=j.find(e=>e.minXP>f),H=w?(f-y.minXP)/(w.minXP-y.minXP)*100:100;null==b||null===(a=b.avatar)||void 0===a||a.hue,null==b||null===(t=b.avatar)||void 0===t||t.skinHue,(null==b?void 0:null===(l=b.avatar)||void 0===l?void 0:l.bgHue)!==void 0&&b.avatar.bgHue,(null==b?void 0:null===(s=b.avatar)||void 0===s?void 0:s.bgSat)!==void 0&&b.avatar.bgSat,(null==b?void 0:null===(n=b.avatar)||void 0===n?void 0:n.bgLight)!==void 0&&b.avatar.bgLight;let P=(null==b?void 0:null===(h=b.spaceship)||void 0===h?void 0:h.color)||"text-cyan-400";return P.includes("-")&&P.split("-")[1],(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-6xl mx-auto mt-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)("h2",{className:"text-xl text-cyan-500 uppercase tracking-[0.2em] font-bold border-b border-cyan-500/30 pb-2 mb-6 flex items-center gap-3",children:[(0,r.jsx)(u.Z,{size:20})," Navigation Systems"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.map((e,a)=>(0,r.jsxs)(C.E.button,{onClick:()=>p(e.id),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},whileHover:{scale:1.02},whileTap:{scale:.98},className:"\n                                ".concat(e.bg," ").concat(e.border," border rounded-2xl p-6\n                                flex items-center gap-6 text-left\n                                backdrop-blur-sm group relative overflow-hidden transition-all duration-300\n                                hover:bg-black/60\n                            "),children:[(0,r.jsx)("div",{className:"p-4 rounded-xl bg-black/50 border ".concat(e.border," ").concat(e.color," shadow-[0_0_15px_rgba(0,0,0,0.5)] group-hover:scale-110 transition-transform duration-300 overflow-hidden relative flex items-center justify-center"),children:"avatar"===e.id?(0,r.jsx)(k.Yt,{userData:b,className:"w-8 h-8 rounded-full border border-white/20"}):"flag"===e.id&&(null==b?void 0:b.flag)?(0,r.jsx)("div",{className:"scale-125",children:(0,r.jsx)(L,{config:b.flag})}):(0,r.jsx)(e.icon,{size:32})}),(0,r.jsxs)("div",{className:"z-10",children:[(0,r.jsx)("h3",{className:"text-xl font-bold uppercase tracking-wider ".concat(e.color," drop-shadow-md"),children:e.title}),(0,r.jsx)("p",{className:"text-gray-400 text-xs mt-1 uppercase tracking-widest opacity-70 group-hover:opacity-100 transition-opacity",children:"Access System"})]}),(0,r.jsx)("div",{className:"absolute top-0 right-0 w-8 h-8 ".concat(e.color.replace("text","bg").replace("400","500"),"/10 rounded-bl-3xl")})]},e.id)),(0,r.jsx)(S.default,{href:"/student/missions",className:"md:col-span-2",children:(0,r.jsxs)(C.E.div,{whileHover:{scale:1.01},className:"border border-green-500/30 bg-green-950/20 rounded-2xl p-6 flex items-center gap-6 hover:bg-green-900/10 transition-colors group cursor-pointer",children:[(0,r.jsx)("div",{className:"p-4 rounded-xl bg-black/50 border border-green-500 text-green-400",children:(0,r.jsx)(u.Z,{size:32})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold uppercase tracking-wider text-green-400",children:"Mission Log"}),(0,r.jsx)("p",{className:"text-gray-400 text-xs mt-1 uppercase tracking-widest",children:"View Active Assignments"})]})]})}),(0,r.jsx)(S.default,{href:"/student",className:"md:col-span-2",children:(0,r.jsxs)(C.E.div,{whileHover:{scale:1.01},className:"border border-cyan-500/30 bg-cyan-950/20 rounded-2xl p-6 flex items-center gap-6 hover:bg-cyan-900/10 transition-colors group cursor-pointer",children:[(0,r.jsx)("div",{className:"p-4 rounded-xl bg-black/50 border border-cyan-500 text-cyan-400",children:(0,r.jsx)(x.Z,{size:32,className:"animate-spin-slow"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold uppercase tracking-wider text-cyan-400",children:"Launch Solar Map"}),(0,r.jsx)("p",{className:"text-gray-400 text-xs mt-1 uppercase tracking-widest",children:"Initiate Flight Sequence"})]})]})})]})]}),(0,r.jsxs)("div",{className:"bg-black/40 border-l border-white/10 p-6 flex flex-col gap-8 rounded-r-3xl relative backdrop-blur-sm lg:min-h-[500px]",children:[(0,r.jsxs)("div",{className:"border-b border-white/10 pb-4 text-center pb-6",children:[(0,r.jsx)("h2",{className:"text-white/70 uppercase tracking-[0.3em] text-xs font-bold mb-1",children:"Active Personnel"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-white tracking-widest truncate mb-2",children:(null==b?void 0:b.displayName)||"Unknown Pilot"}),(0,r.jsxs)("div",{className:"flex justify-center gap-4 text-[10px] uppercase font-bold tracking-widest text-cyan-400/80",children:[(0,r.jsx)("span",{children:y.name}),(0,r.jsx)("span",{className:"text-white/30",children:" | "}),(0,r.jsxs)("span",{children:[f," XP"]})]})]}),(0,r.jsxs)("div",{className:"relative h-48 flex items-center justify-center",children:[(0,r.jsx)("div",{className:"absolute left-0 w-24 h-24 rounded-full border-2 border-purple-500/50 overflow-hidden bg-black shadow-[0_0_20px_rgba(168,85,247,0.3)] z-20",children:(0,r.jsx)(k.Yt,{userData:b,className:"w-full h-full"})}),(0,r.jsx)("div",{className:"absolute h-px bg-gradient-to-r from-purple-500/50 to-cyan-500/50 w-full top-1/2 -z-0"}),(0,r.jsx)("div",{className:"absolute right-0 w-24 h-24 rounded-full border-2 border-cyan-500/50 overflow-hidden bg-black flex items-center justify-center shadow-[0_0_20px_rgba(6,182,212,0.3)] z-20",children:(0,r.jsx)(C.E.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:6,repeat:1/0},children:(0,r.jsx)(_,{size:56,className:"drop-shadow-[0_0_10px_rgba(255,255,255,0.5)]"})})})]}),(0,r.jsxs)("div",{className:"flex-1 bg-white/5 rounded-xl p-6 border border-white/5 relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-yellow-500 uppercase tracking-widest font-bold mb-1",children:"Current Rank"}),(0,r.jsx)("div",{className:"text-xl font-bold text-white uppercase tracking-wider",children:y.name})]}),y.image&&(0,r.jsx)("img",{src:(0,N.K)(y.image),alt:"Rank Badge",className:"w-16 h-16 object-contain drop-shadow-[0_0_15px_rgba(250,204,21,0.3)]"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-xs font-mono text-gray-400",children:[(0,r.jsxs)("span",{children:[f," XP"]}),(0,r.jsxs)("span",{children:[w?w.minXP:"MAX"," XP"]})]}),(0,r.jsx)("div",{className:"h-2 bg-black/50 rounded-full overflow-hidden border border-white/10",children:(0,r.jsx)(C.E.div,{initial:{width:0},animate:{width:"".concat(H,"%")},className:"h-full bg-gradient-to-r from-yellow-600 to-yellow-400"})}),(0,r.jsx)("p",{className:"text-[10px] text-center text-gray-500 uppercase tracking-widest mt-2",children:w?"To Next Promotion":"Maximum Rank Achieved"})]})]}),(0,r.jsxs)("div",{className:"mt-6 aspect-square w-full flex flex-col items-center justify-center relative overflow-hidden rounded-lg bg-black/20 border border-white/5",children:[y.image?(0,r.jsx)("div",{className:"relative z-10 w-full h-full p-6 pb-8",children:(0,r.jsx)("img",{src:(0,N.K)(y.image),alt:"Badge",className:"w-full h-full object-contain drop-shadow-[0_0_20px_rgba(255,255,255,0.2)]"})}):(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-black/30 flex items-center justify-center text-white/20",children:(0,r.jsx)(g.Z,{size:24})}),(0,r.jsx)("span",{className:"absolute bottom-2 text-[10px] text-yellow-500/50 uppercase tracking-widest font-bold z-10",children:"Current Designation"})]})]})]})]})}function E(e){var a,t,i,o,c,d,u,x,g;let{userData:y,user:w}=e,[k,S]=(0,l.useState)(!1),[H,_]=(0,l.useState)(""),[L,z]=(0,l.useState)(P[0]);(0,l.useEffect)(()=>{(null==y?void 0:y.spaceship)&&(_(y.spaceship.name),z(P.find(e=>{var a;return e.class===(null===(a=y.spaceship)||void 0===a?void 0:a.color)})||P[0]))},[y]);let E=async()=>{if(w){S(!0);try{let e=(0,s.JU)(n.db,"users",w.uid);await (0,s.r7)(e,{"spaceship.name":H,"spaceship.color":L.class}),alert("Ship specifications updated, Commander.")}catch(e){console.error(e),alert("Error updating ship specs.")}S(!1)}},F=500+250*((null==y?void 0:null===(a=y.upgrades)||void 0===a?void 0:a.fuel)||0),X=(null==y?void 0:y.fuel)!==void 0?y.fuel:500,A=Math.min(X/F*100,100);return(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto",children:[(0,r.jsxs)("div",{className:"bg-black/50 border border-cyan-900/50 rounded-2xl p-8 flex flex-col items-center justify-center relative min-h-[500px]",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-cyan-900/20 to-transparent pointer-events-none"}),(0,r.jsx)(C.E.div,{className:"relative z-10 ".concat(L.class),animate:{y:[-15,15,-15],rotate:[0,1,-1,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"},children:(0,r.jsx)("img",{src:(0,N.K)("/images/ships/finalship.png"),alt:"Ship",className:"w-[280px] h-[280px] object-contain drop-shadow-[0_0_25px_currentColor]"})}),(0,r.jsxs)("div",{className:"mt-12 text-center z-10 w-full max-w-md",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-white tracking-widest uppercase mb-6",children:H||"Unknown Vessel"}),(0,r.jsxs)("div",{className:"bg-black/60 border border-cyan-900/50 rounded-xl p-4 w-full",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center text-xs uppercase font-bold tracking-widest mb-2",children:[(0,r.jsx)("span",{className:"text-cyan-500",children:"Hyperfuel Reserves"}),(0,r.jsxs)("span",{className:"text-white",children:[Math.floor(X)," / ",F," Units"]})]}),(0,r.jsxs)("div",{className:"relative h-4 bg-cyan-950/50 rounded-full overflow-hidden border border-cyan-900",children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-cyan-600 to-cyan-400 transition-all duration-1000 ease-out",style:{width:"".concat(A,"%")}}),(0,r.jsxs)("div",{className:"absolute inset-0 flex justify-between px-2",children:[(0,r.jsx)("div",{className:"w-px h-full bg-black/20"}),(0,r.jsx)("div",{className:"w-px h-full bg-black/20"}),(0,r.jsx)("div",{className:"w-px h-full bg-black/20"}),(0,r.jsx)("div",{className:"w-px h-full bg-black/20"})]})]}),(0,r.jsx)("div",{className:"text-[10px] text-cyan-700/60 mt-1 font-mono text-center",children:"FUEL CELLS ONLINE  |  POWERED BY XP"})]})]}),(0,r.jsxs)("div",{className:"absolute top-4 left-4 text-xs text-cyan-800 font-mono",children:["HULL INTEGRITY: 100%",(0,r.jsx)("br",{}),"SHIELDS: ONLINE"]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-cyan-950/20 p-6 rounded-xl border border-cyan-500/20",children:[(0,r.jsx)("label",{className:"block text-sm uppercase tracking-wider text-cyan-500 mb-2",children:"Vessel Identification"}),(0,r.jsx)("input",{type:"text",value:H,onChange:e=>_(e.target.value),className:"w-full bg-black/50 border border-cyan-700 rounded p-3 text-white focus:outline-none focus:border-cyan-400 placeholder-cyan-800 transition-colors font-mono",placeholder:"Enter Ship Name"})]}),(0,r.jsxs)("div",{className:"bg-cyan-950/20 p-6 rounded-xl border border-cyan-500/20",children:[(0,r.jsxs)("label",{className:"block text-sm uppercase tracking-wider text-cyan-500 mb-4 flex items-center gap-2",children:[(0,r.jsx)(h.Z,{size:16})," Hull Nanocoating"]}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-3",children:P.map(e=>(0,r.jsxs)("button",{onClick:()=>z(e),className:"p-3 rounded border flex items-center gap-3 transition-all ".concat(L.name===e.name?"bg-cyan-500/20 border-cyan-400 scale-105":"bg-black/40 border-cyan-900 hover:border-cyan-700"),children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full ".concat(e.bg," shadow-[0_0_5px_currentColor]")}),(0,r.jsx)("span",{className:"text-xs uppercase font-bold ".concat(L.name===e.name?"text-white":"text-gray-500"),children:e.name})]},e.name))})]}),(0,r.jsxs)("div",{className:"bg-cyan-950/20 p-6 rounded-xl border border-cyan-500/20",children:[(0,r.jsxs)("label",{className:"block text-sm uppercase tracking-wider text-cyan-500 mb-4 flex items-center gap-2",children:[(0,r.jsx)(p.Z,{size:16})," System Upgrades"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(I,{icon:m.Z,label:"Boosters",level:(null==y?void 0:null===(t=y.upgrades)||void 0===t?void 0:t.boosters)||0,active:((null==y?void 0:null===(i=y.upgrades)||void 0===i?void 0:i.boosters)||0)>0}),(0,r.jsx)(I,{icon:b.Z,label:"Fuel Tank",level:(null==y?void 0:null===(o=y.upgrades)||void 0===o?void 0:o.fuel)||0,active:((null==y?void 0:null===(c=y.upgrades)||void 0===c?void 0:c.fuel)||0)>0}),(0,r.jsx)(I,{icon:v.Z,label:"Landers",level:(null==y?void 0:null===(d=y.upgrades)||void 0===d?void 0:d.landers)||0,active:((null==y?void 0:null===(u=y.upgrades)||void 0===u?void 0:u.landers)||0)>0}),(0,r.jsx)(I,{icon:f.Z,label:"Hull Plating",level:(null==y?void 0:null===(x=y.upgrades)||void 0===x?void 0:x.hull)||0,active:((null==y?void 0:null===(g=y.upgrades)||void 0===g?void 0:g.hull)||0)>0})]})]}),(0,r.jsxs)("button",{onClick:E,disabled:k,className:"w-full py-4 rounded-xl flex items-center justify-center gap-3 font-bold uppercase tracking-widest transition-all ".concat(k?"bg-gray-700 text-gray-400 cursor-wait":"bg-cyan-600 hover:bg-cyan-500 text-black hover:scale-[1.02] shadow-[0_0_20px_rgba(8,145,178,0.4)]"),children:[(0,r.jsx)(j.Z,{size:20}),k?"Calibrating...":"Save Configuration"]})]})]})}function F(){return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto border border-amber-500/30 bg-black/40 rounded-3xl p-8 min-h-[500px]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-8 pb-4 border-b border-amber-500/30",children:[(0,r.jsx)(b.Z,{className:"text-amber-400",size:32}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-amber-400 uppercase tracking-widest",children:"Cargo Hold"})]}),(0,r.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-4",children:[...Array(24)].map((e,a)=>(0,r.jsx)("div",{className:"aspect-square bg-amber-950/20 border border-amber-900/50 rounded-lg flex items-center justify-center hover:bg-amber-900/30 hover:border-amber-500/50 transition-colors cursor-pointer group",children:(0,r.jsx)("div",{className:"text-amber-900/40 text-xs font-mono group-hover:text-amber-500/60",children:"EMPTY"})},a))}),(0,r.jsx)("div",{className:"mt-8 text-center text-amber-500/50 font-mono text-sm",children:"0 / 24 SLOTS OCCUPIED"})]})}function X(e){var a,t,o,c,d,u,x,g;let{onBack:p}=e,{user:m,userData:b}=(0,i.useAuth)(),[v,f]=(0,l.useState)(!1),[j,y]=(0,l.useState)((null==b?void 0:null===(a=b.avatar)||void 0===a?void 0:a.hue)||0),[w,N]=(0,l.useState)((null==b?void 0:null===(t=b.avatar)||void 0===t?void 0:t.skinHue)||0),[S,C]=(0,l.useState)((null==b?void 0:null===(o=b.avatar)||void 0===o?void 0:o.bgHue)!==void 0?b.avatar.bgHue:240),[H,_]=(0,l.useState)((null==b?void 0:null===(c=b.avatar)||void 0===c?void 0:c.bgSat)!==void 0?b.avatar.bgSat:50),[P,I]=(0,l.useState)((null==b?void 0:null===(d=b.avatar)||void 0===d?void 0:d.bgLight)!==void 0?b.avatar.bgLight:20),[L,z]=(0,l.useState)((null==b?void 0:null===(u=b.avatar)||void 0===u?void 0:u.activeHat)||"none"),[E,F]=(0,l.useState)((null==b?void 0:null===(x=b.avatar)||void 0===x?void 0:x.avatarId)||"bunny"),X=e=>{let a=k.Ic.find(a=>a.id===e);a&&(y(a.config.hue),N(a.config.skinHue),C(a.config.bgHue),_(a.config.bgSat),I(a.config.bgLight),z(a.config.activeHat),F(a.config.avatarId))},A=async()=>{if(m){f(!0);try{let e=(0,s.JU)(n.db,"users",m.uid);await (0,s.r7)(e,{"avatar.hue":j,"avatar.skinHue":w,"avatar.bgHue":S,"avatar.bgSat":H,"avatar.bgLight":P,"avatar.activeHat":L,"avatar.avatarId":E}),p()}catch(e){console.error(e),alert("Error saving DNA sequence.")}f(!1)}};return(0,r.jsxs)("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"border border-purple-500/30 bg-black/40 rounded-3xl p-8 flex flex-col items-center justify-center min-h-[400px] relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-purple-900/20 to-transparent pointer-events-none"}),(0,r.jsx)("div",{className:"relative w-64 h-64 rounded-full border-4 border-purple-500/50 overflow-visible flex items-center justify-center transition-colors duration-300 ring-4 ring-purple-900/30 shadow-[0_0_50px_rgba(168,85,247,0.4)]",children:(0,r.jsx)(k.Yt,{hue:j,skinHue:w,bgHue:S,bgSat:H,bgLight:P,hat:L,avatarId:E,className:"w-full h-full rounded-full"})}),(0,r.jsxs)("div",{className:"mt-8 text-center",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-purple-400 uppercase tracking-widest mb-1",children:"Preview"}),(0,r.jsx)("p",{className:"text-purple-300/60 text-sm font-mono",children:"none"!==L?null===(g=k.Cn.find(e=>e.id===L))||void 0===g?void 0:g.name:"Standard Uniform"})]})]}),(0,r.jsxs)("div",{className:"space-y-6 max-h-[700px] overflow-y-auto custom-scrollbar pr-2",children:[(0,r.jsxs)("div",{className:"bg-purple-950/20 p-6 rounded-xl border border-purple-500/20",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[(0,r.jsx)(h.Z,{size:20,className:"text-purple-400"}),(0,r.jsx)("span",{className:"uppercase tracking-wider",children:"Select Identity"})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4",children:k.Ic.map(e=>(0,r.jsxs)("button",{onClick:()=>X(e.id),className:"group relative p-4 rounded-xl border border-white/10 bg-black/40 hover:bg-purple-900/20 hover:border-purple-500/50 transition-all flex flex-col items-center gap-3",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-full border-2 border-white/20 overflow-hidden relative group-hover:scale-110 transition-transform",children:(0,r.jsx)(k.Yt,{hue:e.config.hue,skinHue:e.config.skinHue,bgHue:e.config.bgHue,bgSat:e.config.bgSat,bgLight:e.config.bgLight,hat:e.config.activeHat,avatarId:e.config.avatarId,className:"w-full h-full"})}),(0,r.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider text-purple-300 group-hover:text-white",children:e.name})]},e.id))})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("button",{onClick:p,disabled:v,className:"flex-1 py-4 rounded-xl border border-purple-500/30 text-purple-400 hover:bg-purple-500/10 uppercase tracking-widest font-bold transition-all",children:"Cancel"}),(0,r.jsx)("button",{onClick:A,disabled:v,className:"flex-1 py-4 rounded-xl bg-purple-600 hover:bg-purple-500 text-black uppercase tracking-widest font-bold transition-all shadow-[0_0_20px_rgba(147,51,234,0.4)]",children:v?"Saving...":"Confirm Identity"})]})]})]})}function A(e){var a,t,o,c,d,u,x,g,h;let{onNavigate:m,ranks:b}=e,{userData:v,user:f}=(0,i.useAuth)(),[y,w]=(0,l.useState)(!1),[N,S]=(0,l.useState)(""),C=(null==v?void 0:null===(a=v.avatar)||void 0===a?void 0:a.hue)||0,H=(null==v?void 0:null===(t=v.avatar)||void 0===t?void 0:t.skinHue)||0,_=(null==v?void 0:null===(o=v.avatar)||void 0===o?void 0:o.bgHue)!==void 0?v.avatar.bgHue:260,P=(null==v?void 0:null===(c=v.avatar)||void 0===c?void 0:c.bgSat)!==void 0?v.avatar.bgSat:50,I=(null==v?void 0:null===(d=v.avatar)||void 0===d?void 0:d.bgLight)!==void 0?v.avatar.bgLight:20,L=(null==v?void 0:null===(u=v.avatar)||void 0===u?void 0:u.activeHat)||((null==v?void 0:null===(x=v.avatar)||void 0===x?void 0:x.hat)==="hat1"?"helmet1":null==v?void 0:null===(g=v.avatar)||void 0===g?void 0:g.hat),z=(null==v?void 0:null===(h=v.avatar)||void 0===h?void 0:h.avatarId)||"bunny",E=(null==v?void 0:v.xp)||0,F=[...b||[]].sort((e,a)=>e.minXP-a.minXP).slice().reverse().find(e=>E>=e.minXP)||{name:"Recruit",minXP:0};(0,l.useEffect)(()=>{(null==v?void 0:v.displayName)&&S(v.displayName)},[v]);let X=async()=>{if(f&&N.trim())try{let e=(0,s.JU)(n.db,"users",f.uid);await (0,s.r7)(e,{displayName:N}),w(!1)}catch(e){console.error(e),alert("Failed to update identification.")}};return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto border border-purple-500/30 bg-black/40 rounded-3xl p-8 min-h-[500px] flex flex-col items-center justify-center",children:[(0,r.jsxs)("div",{className:"relative mb-8 group",children:[(0,r.jsxs)("div",{className:"w-48 h-48 rounded-full border-4 border-purple-500/50 overflow-hidden flex items-center justify-center relative transition-colors duration-300",children:[(0,r.jsx)(k.Yt,{bgHue:_,bgSat:P,bgLight:I,skinHue:H,hue:C,hat:L,avatarId:z,className:"w-full h-full"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-purple-500/10 mix-blend-overlay opacity-0 group-hover:opacity-100 transition-opacity z-20 pointer-events-none"})]}),(0,r.jsx)("button",{onClick:()=>m("avatar-config"),className:"absolute bottom-0 right-0 p-3 bg-purple-500 rounded-full text-black hover:bg-purple-400 transition-colors shadow-[0_0_15px_rgba(168,85,247,0.5)] z-30",children:(0,r.jsx)(p.Z,{size:20})})]}),(0,r.jsx)("div",{className:"flex items-center gap-3 mb-2 relative",children:y?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",value:N,onChange:e=>S(e.target.value),className:"bg-black/50 border border-purple-500 text-white font-bold text-2xl px-2 py-1 rounded w-64 text-center focus:outline-none focus:ring-2 focus:ring-purple-500",autoFocus:!0}),(0,r.jsx)("button",{onClick:X,className:"p-2 bg-green-600 rounded-lg hover:bg-green-500 text-white",children:(0,r.jsx)(j.Z,{size:16})}),(0,r.jsx)("button",{onClick:()=>w(!1),className:"p-2 bg-red-600 rounded-lg hover:bg-red-500 text-white",children:"?"})]}):(0,r.jsxs)("div",{className:"flex items-center gap-3 group/edit",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white cursor-pointer",onClick:()=>w(!0),children:(null==v?void 0:v.displayName)||"Cadet Pilot"}),(0,r.jsx)("button",{onClick:()=>w(!0),className:"text-purple-500 opacity-0 group-hover/edit:opacity-100 transition-opacity p-1 hover:bg-purple-500/20 rounded",children:(0,r.jsx)(p.Z,{size:14})})]})}),(0,r.jsxs)("p",{className:"text-purple-400 font-mono text-sm tracking-wider mb-8 uppercase",children:[F.name,"  |  NO FACTION"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"bg-purple-950/30 p-4 rounded-xl border border-purple-500/20 text-center",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-white",children:[E," XP"]}),(0,r.jsx)("div",{className:"text-xs text-purple-400 uppercase tracking-wider",children:"Experience"})]}),(0,r.jsxs)("div",{className:"bg-purple-950/30 p-4 rounded-xl border border-purple-500/20 text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-white",children:E}),(0,r.jsx)("div",{className:"text-xs text-purple-400 uppercase tracking-wider",children:"Current XP"})]})]})]})}let Z=[{id:"silver",name:"Titanium",color:"#cbd5e1"},{id:"gold",name:"Gold Ultima",color:"#eab308"},{id:"wood",name:"Ancient Oak",color:"#854d0e"},{id:"black",name:"Carbon Fiber",color:"#262626"}],R=[{id:"solid",name:"Solid Standard"},{id:"stripe-h",name:"Horizon Stripe"},{id:"stripe-v",name:"Vertical Split"},{id:"cross",name:"Solar Cross"},{id:"checkered",name:"Battle Checker"},{id:"circle",name:"Core Sun"}],U=[{id:"red",hex:"#ef4444"},{id:"blue",hex:"#3b82f6"},{id:"green",hex:"#22c55e"},{id:"yellow",hex:"#eab308"},{id:"purple",hex:"#a855f7"},{id:"black",hex:"#171717"},{id:"white",hex:"#f8fafc"},{id:"orange",hex:"#f97316"}];function B(){var e,a;let{userData:t,user:o}=(0,i.useAuth)(),[c,u]=(0,l.useState)(!1),[x,g]=(0,l.useState)("silver"),[h,p]=(0,l.useState)("solid"),[m,b]=(0,l.useState)("blue"),[v,f]=(0,l.useState)("white"),[y,w]=(0,l.useState)("rectangle");(0,l.useEffect)(()=>{(null==t?void 0:t.flag)&&(g(t.flag.pole||"silver"),p(t.flag.pattern||"solid"),b(t.flag.primaryColor||"blue"),f(t.flag.secondaryColor||"white"),w(t.flag.shape||"rectangle"))},[t]);let N=async()=>{if(o){u(!0);try{await (0,s.r7)((0,s.JU)(n.db,"users",o.uid),{flag:{pole:x,pattern:h,primaryColor:m,secondaryColor:v,shape:y}}),alert("Flag constructed successfully!")}catch(e){console.error(e),alert("Error saving flag.")}u(!1)}},k=e=>{var a;return(null===(a=U.find(a=>a.id===e))||void 0===a?void 0:a.hex)||"#3b82f6"};return(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto",children:[(0,r.jsxs)("div",{className:"bg-black/50 border border-red-900/50 rounded-2xl p-8 flex flex-col items-center justify-center min-h-[400px] relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-red-900/20 to-transparent pointer-events-none"}),(0,r.jsx)("div",{className:"relative z-10 scale-150",children:(0,r.jsxs)("svg",{width:"220",height:"300",viewBox:"0 0 220 300",children:[(0,r.jsx)("rect",{x:"10",y:"20",width:"10",height:"280",rx:"5",fill:null===(e=Z.find(e=>e.id===x))||void 0===e?void 0:e.color}),(0,r.jsxs)("g",{transform:"translate(20, 30)",children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("clipPath",{id:"flagShape",children:["rectangle"===y&&(0,r.jsx)("rect",{x:"0",y:"0",width:"200",height:"120"}),"pennant"===y&&(0,r.jsx)("polygon",{points:"0,0 200,60 0,120"}),"triangle"===y&&(0,r.jsx)("polygon",{points:"0,0 200,0 100,120 0,0"}),"swallowtail"===y&&(0,r.jsx)("polygon",{points:"0,0 200,0 200,120 100,60 0,120"})]})}),(0,r.jsxs)("g",{clipPath:"url(#flagShape)",children:[(()=>{let e=k(m),a=k(v);switch(h){case"solid":default:return(0,r.jsx)("rect",{x:"0",y:"0",width:"200",height:"120",fill:e});case"stripe-h":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"200",height:"120",fill:e}),(0,r.jsx)("rect",{x:"0",y:"40",width:"200",height:"40",fill:a})]});case"stripe-v":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"200",height:"120",fill:e}),(0,r.jsx)("rect",{x:"66",y:"0",width:"66",height:"120",fill:a})]});case"cross":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"200",height:"120",fill:e}),(0,r.jsx)("rect",{x:"50",y:"0",width:"30",height:"120",fill:a}),(0,r.jsx)("rect",{x:"0",y:"45",width:"200",height:"30",fill:a})]});case"circle":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"200",height:"120",fill:e}),(0,r.jsx)("circle",{cx:"100",cy:"60",r:"35",fill:a})]});case"checkered":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"100",height:"60",fill:e}),(0,r.jsx)("rect",{x:"100",y:"0",width:"100",height:"60",fill:a}),(0,r.jsx)("rect",{x:"0",y:"60",width:"100",height:"60",fill:a}),(0,r.jsx)("rect",{x:"100",y:"60",width:"100",height:"60",fill:e})]})}})(),(0,r.jsx)("rect",{x:"0",y:"0",width:"200",height:"120",fill:"url(#ripple)",opacity:"0.3",style:{mixBlendMode:"multiply"}})]})]}),(0,r.jsx)("circle",{cx:"15",cy:"20",r:"8",fill:null===(a=Z.find(e=>e.id===x))||void 0===a?void 0:a.color,stroke:"#000",strokeWidth:"2"})]})}),(0,r.jsx)("div",{className:"mt-12 text-center z-10",children:(0,r.jsx)("h2",{className:"text-xl font-bold text-red-500 tracking-widest uppercase",children:"Planetary Beacon"})})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-red-950/20 p-6 rounded-xl border border-red-500/20 max-h-[600px] overflow-y-auto custom-scrollbar",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold text-white mb-6 uppercase tracking-wider flex items-center gap-2",children:[(0,r.jsx)(d.Z,{size:20,className:"text-red-500"})," Fabricator"]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-xs font-bold text-red-400 uppercase tracking-widest mb-3",children:"Pole Material"}),(0,r.jsx)("div",{className:"flex gap-2",children:Z.map(e=>(0,r.jsx)("button",{onClick:()=>g(e.id),className:"flex-1 p-2 rounded text-xs uppercase font-bold border transition-all ".concat(x===e.id?"bg-red-500 text-black border-red-400":"bg-black/40 border-red-900/50 text-gray-500 hover:text-red-400"),children:e.name},e.id))})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-xs font-bold text-red-400 uppercase tracking-widest mb-3",children:"Primary Color"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2",children:U.map(e=>(0,r.jsx)("button",{onClick:()=>b(e.id),className:"h-10 rounded border transition-all ".concat(m===e.id?"scale-110 border-white ring-2 ring-red-500 ring-offset-2 ring-offset-black":"border-transparent opacity-70 hover:opacity-100"),style:{backgroundColor:e.hex}},"p-".concat(e.id)))})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-xs font-bold text-red-400 uppercase tracking-widest mb-3",children:"Secondary Color"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2",children:U.map(e=>(0,r.jsx)("button",{onClick:()=>f(e.id),className:"h-10 rounded border transition-all ".concat(v===e.id?"scale-110 border-white ring-2 ring-red-500 ring-offset-2 ring-offset-black":"border-transparent opacity-70 hover:opacity-100"),style:{backgroundColor:e.hex}},"s-".concat(e.id)))})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-xs font-bold text-red-400 uppercase tracking-widest mb-3",children:"Pattern"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:R.map(e=>(0,r.jsx)("button",{onClick:()=>p(e.id),className:"p-3 rounded border text-left text-xs uppercase font-bold transition-all ".concat(h===e.id?"bg-red-500/20 border-red-400 text-white":"bg-black/30 border-red-900/30 text-gray-500 hover:bg-red-900/20"),children:e.name},e.id))})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-xs font-bold text-red-400 uppercase tracking-widest mb-3",children:"Banner Shape"}),(0,r.jsx)("div",{className:"flex gap-2",children:["rectangle","pennant","check","swallowtail"].map(e=>(0,r.jsx)("button",{onClick:()=>w(e),className:"flex-1 p-2 rounded border text-[10px] uppercase font-bold transition-all ".concat(y===e?"bg-white text-black":"bg-black/50 border-white/20 text-gray-400 hover:bg-white/10"),children:"swallowtail"===e?"Tail":e},e))})]})]}),(0,r.jsxs)("button",{onClick:N,disabled:c,className:"w-full py-4 rounded-xl flex items-center justify-center gap-3 font-bold uppercase tracking-widest transition-all ".concat(c?"bg-gray-700 text-gray-400 cursor-wait":"bg-red-600 hover:bg-red-500 text-black hover:scale-[1.02] shadow-[0_0_20px_rgba(220,38,38,0.4)]"),children:[(0,r.jsx)(j.Z,{size:20}),c?"Forging...":"Fabricate Flag"]})]})]})}let D=[{id:"1",name:"Space Cadet",minXP:0,image:"/images/badges/cadet.png"},{id:"2",name:"Rookie Pilot",minXP:100,image:"/images/badges/RookiePilot.png"},{id:"3",name:"Star Scout",minXP:300,image:"/images/badges/StarScout.png"},{id:"4",name:"Nebula Navigator",minXP:600,image:"/images/badges/NebulaNavigator.png"},{id:"5",name:"Solar Specialist",minXP:1e3,image:"/images/badges/SolarSpecialist.png"},{id:"6",name:"Comet Captain",minXP:1500,image:"/images/badges/CometCaptain.png"},{id:"7",name:"Galaxy Guardian",minXP:2200,image:"/images/badges/GalaxyGuardian.png"},{id:"8",name:"Cosmic Commander",minXP:3e3,image:"/images/badges/CosmicCommander.png"},{id:"9",name:"Void Admiral",minXP:4e3,image:"/images/badges/VoidAdmiral.png"},{id:"10",name:"Grand Star Admiral",minXP:5e3,image:"/images/badges/GrandStarAdmiral.png"}];function M(){let{userData:e,user:a}=(0,i.useAuth)(),[t,o]=(0,l.useState)("cockpit"),[c,d]=(0,l.useState)(D);return(0,l.useEffect)(()=>{if(!e)return;let a="student"===e.role?e.teacherId:e.uid,t=(0,s.JU)(n.db,"game-config","ranks");a&&(t=(0,s.JU)(n.db,"users/".concat(a,"/settings"),"ranks"));let r=(0,s.cf)(t,e=>{e.exists()&&e.data().list&&d(e.data().list)});return()=>r()},[e]),(0,r.jsxs)("div",{className:"min-h-screen bg-space-950 p-6 font-mono pb-20 overflow-x-hidden",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto relative z-10",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:["cockpit"===t?(0,r.jsxs)(S.default,{href:"/student",className:"p-3 rounded-xl border border-white/10 hover:bg-white/5 text-white/50 hover:text-white transition-all",children:[(0,r.jsx)(y.Z,{size:20}),(0,r.jsx)("span",{className:"sr-only",children:"Exit Cockpit"})]}):(0,r.jsx)("button",{onClick:()=>o("avatar-config"===t?"avatar":"cockpit"),className:"p-3 rounded-xl border border-white/10 hover:bg-white/5 text-white/50 hover:text-white transition-all",children:(0,r.jsx)(w.Z,{size:20})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold uppercase tracking-widest text-white flex items-center gap-3",children:[(0,r.jsx)(x.Z,{className:"text-cyan-500 animate-spin-slow"}),(()=>{switch(t){case"ship":return"Hangar Bay";case"inventory":return"Cargo Hold";case"avatar":return"Pilot Profile";case"avatar-config":return"DNA Sequencer";case"flag":return"Flag Fabricator";default:return"Main Cockpit"}})()]}),(0,r.jsx)("div",{className:"text-xs text-cyan-500/50 uppercase tracking-[0.3em]",children:"System Status: Normal"})]})]}),(0,r.jsx)(H.M,{mode:"wait",children:(0,r.jsxs)(C.E.div,{initial:{opacity:0,scale:.95,filter:"blur(10px)"},animate:{opacity:1,scale:1,filter:"blur(0px)"},exit:{opacity:0,scale:1.05,filter:"blur(10px)"},transition:{duration:.3},children:["cockpit"===t&&(0,r.jsx)(z,{onNavigate:e=>o(e),ranks:c}),"ship"===t&&(0,r.jsx)(E,{userData:e,user:a}),"inventory"===t&&(0,r.jsx)(F,{}),"avatar"===t&&(0,r.jsx)(A,{onNavigate:e=>o(e),ranks:c}),"avatar-config"===t&&(0,r.jsx)(X,{onBack:()=>o("avatar")}),"flag"===t&&(0,r.jsx)(B,{})]},t)})]})]})}},5802:function(e,a,t){"use strict";t.d(a,{Cn:function(){return n},Ic:function(){return s},W$:function(){return i},Yt:function(){return o}});var r=t(3827),l=t(1657);let i=[{id:"bunny",name:"Space Bunny",src:"/images/avatar/spacebunny.png"},{id:"cat",name:"Cosmic Cat",src:"/images/avatar/spacecat.png"},{id:"raccoon",name:"Rocket Raccoon",src:"/images/avatar/spaceraccoon.png"},{id:"otter",name:"Orbit Otter",src:"/images/avatar/spaceotter.png"},{id:"pup",name:"Pluto Pup",src:"/images/avatar/spacepup.png"},{id:"hamster",name:"Hyper Hamster",src:"/images/avatar/spacehamster.png"},{id:"owl",name:"Omega Owl",src:"/images/avatar/spaceowl.png"},{id:"penguin",name:"Power Penguin",src:"/images/avatar/spacepenguin.png"},{id:"turtle",name:"Turbo Turtle",src:"/images/avatar/spaceturtle.png"}],s=[{id:"p1",name:"Cadet Blue",config:{hue:0,skinHue:200,bgHue:240,bgSat:60,bgLight:50,activeHat:"none",avatarId:"bunny"}},{id:"p2",name:"Crimson Guard",config:{hue:350,skinHue:0,bgHue:0,bgSat:70,bgLight:40,activeHat:"none",avatarId:"cat"}},{id:"p3",name:"Forest Ranger",config:{hue:120,skinHue:100,bgHue:120,bgSat:50,bgLight:60,activeHat:"none",avatarId:"raccoon"}},{id:"p4",name:"Solar Pilot",config:{hue:45,skinHue:60,bgHue:40,bgSat:90,bgLight:70,activeHat:"none",avatarId:"otter"}},{id:"p5",name:"Void Walker",config:{hue:270,skinHue:260,bgHue:280,bgSat:40,bgLight:20,activeHat:"none",avatarId:"pup"}},{id:"p6",name:"Neon Scout",config:{hue:180,skinHue:300,bgHue:320,bgSat:100,bgLight:50,activeHat:"none",avatarId:"cat"}},{id:"p7",name:"Rusty Mechanic",config:{hue:25,skinHue:30,bgHue:15,bgSat:50,bgLight:40,activeHat:"none",avatarId:"raccoon"}},{id:"p8",name:"Ice Specialist",config:{hue:190,skinHue:180,bgHue:200,bgSat:70,bgLight:90,activeHat:"none",avatarId:"bunny"}}],n=[{id:"none",name:"No Hat",src:"",style:""},{id:"hat1",name:"Helmet",src:"/images/hats/helmet1.png",style:"scale-[2.5] translate-y-[45%]"},{id:"hat2",name:"Fedora",src:"/images/hats/hat2.png",style:"scale-[0.9] -translate-y-[40%]"},{id:"hat3",name:"Top Hat",src:"/images/hats/tophat.png",style:"scale-[0.9] -translate-y-[40%]"},{id:"hat4",name:"Cowboy Hat",src:"/images/hats/cowboyhat.png",style:"scale-[0.9] -translate-y-[40%]"},{id:"hat5",name:"Dungan Doves Cap",src:"/images/hats/dungandoves.png",style:"scale-[0.9] -translate-y-[40%]"}],o=e=>{var a,t,s,o,c,d,u,x,g,h,p,m,b,v,f,j,y;let{userData:w,hue:N,skinHue:k,bgHue:S,bgSat:C,bgLight:H,hat:_,avatarId:P,className:I=""}=e,L=null!==(g=null!=N?N:null==w?void 0:null===(a=w.avatar)||void 0===a?void 0:a.hue)&&void 0!==g?g:0,z=null!==(h=null!=k?k:null==w?void 0:null===(t=w.avatar)||void 0===t?void 0:t.skinHue)&&void 0!==h?h:0,E=null!==(p=null!=S?S:null==w?void 0:null===(s=w.avatar)||void 0===s?void 0:s.bgHue)&&void 0!==p?p:260,F=null!==(m=null!=C?C:null==w?void 0:null===(o=w.avatar)||void 0===o?void 0:o.bgSat)&&void 0!==m?m:50,X=null!==(b=null!=H?H:null==w?void 0:null===(c=w.avatar)||void 0===c?void 0:c.bgLight)&&void 0!==b?b:20,A=null!==(v=null!=P?P:null==w?void 0:null===(d=w.avatar)||void 0===d?void 0:d.avatarId)&&void 0!==v?v:"bunny",Z=i.find(e=>e.id===A)||i[0],R=(null==Z?void 0:Z.src)||"/images/avatar/spacebunny.png",U=null!==(y=null!==(j=null!==(f=null!=_?_:null==w?void 0:w.activeHat)&&void 0!==f?f:null==w?void 0:null===(u=w.avatar)||void 0===u?void 0:u.activeHat)&&void 0!==j?j:null==w?void 0:null===(x=w.avatar)||void 0===x?void 0:x.hat)&&void 0!==y?y:"none",B=n.find(e=>e.id===U),D=null==B?void 0:B.src,M=(null==B?void 0:B.style)||"scale-100";return(0,r.jsxs)("div",{className:"relative ".concat(I),style:{backgroundColor:"hsl(".concat(E,", ").concat(F,"%, ").concat(X,"%)")},children:[(0,r.jsx)("div",{className:"absolute inset-0 z-0",style:{backgroundColor:"hsl(".concat(z,", 70%, 50%)"),maskImage:"url(".concat((0,l.K)(R),")"),WebkitMaskImage:"url(".concat((0,l.K)(R),")"),maskSize:"cover"}}),(0,r.jsx)("img",{src:(0,l.K)(R),alt:"Avatar",className:"w-full h-full object-cover relative z-10",style:{filter:"hue-rotate(".concat(L,"deg)")}}),D&&(0,r.jsx)("img",{src:(0,l.K)(D),alt:"Accessory",className:"absolute inset-0 z-20 w-full h-full object-cover pointer-events-none transition-transform ".concat(M),onError:e=>console.error("Error loading hat:",D,(0,l.K)(D))})]})}},6678:function(e,a,t){"use strict";t.r(a),t.d(a,{AuthProvider:function(){return u},useAuth:function(){return x}});var r=t(3827),l=t(4090),i=t(7065),s=t(8121),n=t(4499),o=t(7907),c=t(1657);let d=(0,l.createContext)({});function u(e){let{children:a}=e,[t,u]=(0,l.useState)(null),[x,g]=(0,l.useState)(null),[h,p]=(0,l.useState)(!0),m=(0,o.useRouter)();(0,l.useEffect)(()=>{let e=(0,i.Aj)(n.I8,async e=>{if(u(e),e)try{let t=(0,s.JU)(n.db,"users",e.uid),r=await (0,s.QT)(t);if(r.exists()){let a=r.data(),l="andrewpcarlson85@gmail.com"===e.email,i={};if(l&&"teacher"!==a.role&&(console.log("Fixing Admin Role for Legacy User"),a.role="teacher",i.role="teacher"),"teacher"===a.role&&!a.classCode){console.log("Generating Class Code for existing teacher");let e=(0,c.a)();a.classCode=e,i.classCode=e}if(Object.keys(i).length>0)try{await (0,s.pl)(t,i,{merge:!0})}catch(e){console.warn("Could not update user profile in DB",e)}g(a)}else{var a;e.email;let r={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:"teacher",classCode:(0,c.a)(),status:"active",subscriptionStatus:"trial",schoolName:"",location:"earth",spaceship:{name:"SS "+((null===(a=e.displayName)||void 0===a?void 0:a.split(" ")[0])||"Voyager"),color:"text-blue-400",type:"scout",speed:1}};await (0,s.pl)(t,r),g(r)}}catch(a){console.error("Error fetching user data",a),"andrewpcarlson85@gmail.com"===e.email&&(console.log("Using Fallback Admin Profile due to DB error"),g({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:"teacher",status:"active",location:"earth",xp:9999,spaceship:{name:"SS Command (Fallback)",color:"text-yellow-400",type:"fighter",speed:2}}))}else g(null);p(!1)});return()=>e()},[]);let b=async()=>{try{await (0,i.rh)(n.I8,n.Vv)}catch(e){console.error("Login failed",e)}},v=async(e,a)=>{try{await (0,i.e5)(n.I8,e,a)}catch(e){throw console.error("Student Login Failed",e),e}},f=async()=>{await (0,i.w7)(n.I8),g(null),m.push("/")};return(0,r.jsx)(d.Provider,{value:{user:t,userData:x,loading:h,signInWithGoogle:b,signInStudent:v,logout:f},children:a})}let x=()=>(0,l.useContext)(d)},4499:function(e,a,t){"use strict";t.d(a,{I8:function(){return d},Vv:function(){return u},db:function(){return c},qe:function(){return n}});var r=t(6142),l=t(8121),i=t(7065),s=t(3493);let n={apiKey:"AIzaSyDVHiiCHkP-RFOI26cIrD_OijLnw1r3B8Q",authDomain:"spaceadventure-7d540.firebaseapp.com",projectId:"spaceadventure-7d540",storageBucket:"spaceadventure-7d540.firebasestorage.app",messagingSenderId:"546441300465",appId:"1:546441300465:web:28ae387d2bdbb8011a1c50",measurementId:"G-8R9PYL00XH"},o=(0,r.C6)().length>0?(0,r.Mq)():(0,r.ZF)(n),c=(0,l.ad)(o),d=(0,i.v0)(o),u=new i.hJ;(0,s.Gb)().then(e=>{e&&(0,s.IH)(o)})},1657:function(e,a,t){"use strict";t.d(a,{K:function(){return r},a:function(){return l}});let r=e=>{let a=e.startsWith("/")?e:"/".concat(e);return window.location.hostname.includes("github.io")?"https://shootyq.github.io/SpaceAdventure".concat(a):"".concat("").concat(a)},l=()=>{let e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",a="";for(let t=0;t<6;t++)a+=e.charAt(Math.floor(Math.random()*e.length));return a}}},function(e){e.O(0,[358,38,911,250,55,103,971,69,744],function(){return e(e.s=8102)}),_N_E=e.O()}]);