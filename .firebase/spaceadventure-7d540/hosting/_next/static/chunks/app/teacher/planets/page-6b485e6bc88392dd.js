(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10],{4621:function(e,t,r){Promise.resolve().then(r.bind(r,4637))},4637:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var a=r(3827),n=r(4090),i=r(8121),s=r(4499),o=r(1657),l=r(6678),c=r(8792),d=r(3879),u=r(8994),p=r(3276);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,r(7461).Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);var m=r(699),x=r(2225);function b(){let{user:e}=(0,l.useAuth)(),[t,r]=(0,n.useState)([]),[b,f]=(0,n.useState)(!0),[g,y]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(!e)return;let t=(0,i.hJ)(s.db,"users/".concat(e.uid,"/planets")),a=(0,i.cf)(t,e=>{let t=new Map;e.forEach(e=>{let r=e.data();t.set(e.id,{...r,id:e.id})}),r(x.H.map(e=>({...t.get(e.id)||{id:e.id,xpGoal:1e3,currentXP:0,rewardName:"",rewardDescription:""},name:e.name,color:e.color}))),f(!1)});return()=>a()},[e]);let w=(e,t,a)=>{r(r=>r.map(r=>r.id===e?{...r,[t]:a}:r))},v=async t=>{if(e){y(t.id);try{await (0,i.pl)((0,i.JU)(s.db,"users/".concat(e.uid,"/planets"),t.id),{id:t.id,xpGoal:Number(t.xpGoal),rewardName:t.rewardName,rewardDescription:t.rewardDescription,teacherId:e.uid},{merge:!0}),y(null)}catch(e){console.error("Error saving planet:",e),y(null)}}};return(0,a.jsx)("div",{className:"min-h-screen bg-space-950 p-6 font-mono text-cyan-400",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(c.default,{href:"/teacher",className:"p-2 rounded-full border border-cyan-500/30 hover:bg-cyan-900/20 text-cyan-500",children:(0,a.jsx)(d.Z,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold uppercase tracking-widest text-white",children:"Planetary Systems"}),(0,a.jsx)("p",{className:"text-cyan-600 text-sm mt-1",children:"Manage colony goals and rewards"})]})]})}),b?(0,a.jsx)("div",{className:"flex justify-center p-20",children:(0,a.jsx)(u.Z,{className:"animate-spin"})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:t.map(e=>(0,a.jsxs)("div",{className:"bg-black/40 border border-cyan-900/50 rounded-xl p-6 backdrop-blur-sm relative overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 ".concat(e.color.replace("bg-","bg-").replace("text-","")," opacity-10 rounded-bl-full pointer-events-none")}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"w-16 h-16 flex items-center justify-center relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 ".concat(e.color," blur-xl opacity-30 rounded-full")}),(0,a.jsx)("img",{src:(0,o.K)("/images/planetpng/".concat(e.id,".png")),alt:e.name,className:"w-full h-full object-contain relative z-10 drop-shadow-md"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white uppercase tracking-wider",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-cyan-600 uppercase",children:["Sector ",e.id]})]})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-cyan-950/20 rounded-lg border border-cyan-900/30",children:[(0,a.jsxs)("div",{className:"flex justify-between items-end mb-2",children:[(0,a.jsxs)("label",{className:"text-xs text-cyan-500 uppercase font-bold flex items-center gap-2",children:[(0,a.jsx)(p.Z,{size:14})," Colony Progress"]}),(0,a.jsxs)("span",{className:"text-white font-mono font-bold",children:[e.currentXP," / ",e.xpGoal," XP"]})]}),(0,a.jsx)("div",{className:"h-2 bg-black rounded-full overflow-hidden border border-white/10",children:(0,a.jsx)("div",{className:"h-full bg-cyan-500 transition-all duration-1000",style:{width:"".concat(Math.min(e.currentXP/e.xpGoal*100,100),"%")}})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs uppercase tracking-wider text-cyan-600 mb-1",children:"XP Goal"}),(0,a.jsx)("input",{type:"number",value:e.xpGoal,onChange:t=>w(e.id,"xpGoal",t.target.value),className:"w-full bg-black/50 border border-cyan-800 rounded p-2 text-white text-sm focus:border-cyan-400 outline-none transition-colors"})]}),(0,a.jsxs)("div",{className:"border-t border-cyan-900/30 pt-4 mt-4",children:[(0,a.jsxs)("label",{className:"block text-xs uppercase tracking-wider text-yellow-500 mb-2 flex items-center gap-2",children:[(0,a.jsx)(h,{size:14})," Completion Reward"]}),(0,a.jsx)("input",{type:"text",placeholder:"Reward Title (e.g. Pizza Party)",value:e.rewardName,onChange:t=>w(e.id,"rewardName",t.target.value),className:"w-full bg-black/50 border border-cyan-800 rounded p-2 text-white text-sm mb-2 focus:border-yellow-500/50 outline-none transition-colors"}),(0,a.jsx)("textarea",{placeholder:"Description or details...",value:e.rewardDescription,onChange:t=>w(e.id,"rewardDescription",t.target.value),className:"w-full bg-black/50 border border-cyan-800 rounded p-2 text-white text-xs h-20 resize-none focus:border-yellow-500/50 outline-none transition-colors"})]}),(0,a.jsxs)("button",{onClick:()=>v(e),disabled:g===e.id,className:"w-full py-2 bg-cyan-900/40 hover:bg-cyan-800/60 border border-cyan-700 hover:border-cyan-500 text-cyan-300 rounded uppercase text-xs font-bold tracking-widest flex items-center justify-center gap-2 transition-all mt-2",children:[g===e.id?(0,a.jsx)(u.Z,{className:"animate-spin",size:16}):(0,a.jsx)(m.Z,{size:16}),"Save Configuration"]})]})]},e.id))})]})})}},6678:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return u},useAuth:function(){return p}});var a=r(3827),n=r(4090),i=r(7065),s=r(8121),o=r(4499),l=r(7907),c=r(1657);let d=(0,n.createContext)({});function u(e){let{children:t}=e,[r,u]=(0,n.useState)(null),[p,h]=(0,n.useState)(null),[m,x]=(0,n.useState)(!0),b=(0,l.useRouter)();(0,n.useEffect)(()=>{let e=(0,i.Aj)(o.I8,async e=>{if(u(e),e)try{let r=(0,s.JU)(o.db,"users",e.uid),a=await (0,s.QT)(r);if(a.exists()){let t=a.data(),n="andrewpcarlson85@gmail.com"===e.email,i={};if(n&&"teacher"!==t.role&&(console.log("Fixing Admin Role for Legacy User"),t.role="teacher",i.role="teacher"),"teacher"===t.role&&!t.classCode){console.log("Generating Class Code for existing teacher");let e=(0,c.a)();t.classCode=e,i.classCode=e}if(Object.keys(i).length>0)try{await (0,s.pl)(r,i,{merge:!0})}catch(e){console.warn("Could not update user profile in DB",e)}h(t)}else{var t;e.email;let a={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:"teacher",classCode:(0,c.a)(),status:"active",subscriptionStatus:"trial",schoolName:"",location:"earth",spaceship:{name:"SS "+((null===(t=e.displayName)||void 0===t?void 0:t.split(" ")[0])||"Voyager"),color:"text-blue-400",type:"scout",speed:1}};await (0,s.pl)(r,a),h(a)}}catch(t){console.error("Error fetching user data",t),"andrewpcarlson85@gmail.com"===e.email&&(console.log("Using Fallback Admin Profile due to DB error"),h({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:"teacher",status:"active",location:"earth",xp:9999,spaceship:{name:"SS Command (Fallback)",color:"text-yellow-400",type:"fighter",speed:2}}))}else h(null);x(!1)});return()=>e()},[]);let f=async()=>{try{await (0,i.rh)(o.I8,o.Vv)}catch(e){console.error("Login failed",e)}},g=async(e,t)=>{try{await (0,i.e5)(o.I8,e,t)}catch(e){throw console.error("Student Login Failed",e),e}},y=async()=>{await (0,i.w7)(o.I8),h(null),b.push("/")};return(0,a.jsx)(d.Provider,{value:{user:r,userData:p,loading:m,signInWithGoogle:f,signInStudent:g,logout:y},children:t})}let p=()=>(0,n.useContext)(d)},4499:function(e,t,r){"use strict";r.d(t,{I8:function(){return d},Vv:function(){return u},db:function(){return c},qe:function(){return o}});var a=r(6142),n=r(8121),i=r(7065),s=r(3493);let o={apiKey:"AIzaSyDVHiiCHkP-RFOI26cIrD_OijLnw1r3B8Q",authDomain:"spaceadventure-7d540.firebaseapp.com",projectId:"spaceadventure-7d540",storageBucket:"spaceadventure-7d540.firebasestorage.app",messagingSenderId:"546441300465",appId:"1:546441300465:web:28ae387d2bdbb8011a1c50",measurementId:"G-8R9PYL00XH"},l=(0,a.C6)().length>0?(0,a.Mq)():(0,a.ZF)(o),c=(0,n.ad)(l),d=(0,i.v0)(l),u=new i.hJ;(0,s.Gb)().then(e=>{e&&(0,s.IH)(l)})},1657:function(e,t,r){"use strict";r.d(t,{K:function(){return a},a:function(){return n}});let a=e=>{let t=e.startsWith("/")?e:"/".concat(e);return window.location.hostname.includes("github.io")?"https://shootyq.github.io/SpaceAdventure".concat(t):"".concat("").concat(t)},n=()=>{let e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",t="";for(let r=0;r<6;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}},7461:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(4090),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),s=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{color:o="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:p,...h}=r;return(0,a.createElement)("svg",{ref:s,...n,width:l,height:l,stroke:o,strokeWidth:d?24*Number(c)/Number(l):c,className:["lucide","lucide-".concat(i(e)),u].join(" "),...h},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(p)?p:[p]])});return r.displayName="".concat(e),r}},3879:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(7461).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3276:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(7461).Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},8994:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(7461).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},699:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(7461).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},8792:function(e,t,r){"use strict";r.d(t,{default:function(){return n.a}});var a=r(5250),n=r.n(a)},7907:function(e,t,r){"use strict";var a=r(5313);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},2225:function(e,t,r){"use strict";r.d(t,{H:function(){return a}});let a=[{id:"sun",name:"The Sun",color:"bg-yellow-500 shadow-[0_0_100px_#eab308]",size:"w-32 h-32",pixelSize:128,orbitSize:0,orbitDuration:0,startAngle:0,description:"The burning core of our system.",xpRequired:0},{id:"mercury",name:"Mercury",color:"bg-gray-400",size:"w-6 h-6",pixelSize:24,orbitSize:300,orbitDuration:3888,startAngle:45,description:"Hot, fast, and rocky.",xpRequired:100},{id:"venus",name:"Venus",color:"bg-orange-300",size:"w-8 h-8",pixelSize:32,orbitSize:450,orbitDuration:9963,startAngle:120,description:"Wrapped in thick clouds.",xpRequired:250},{id:"earth",name:"Earth",color:"bg-blue-500",size:"w-10 h-10",pixelSize:40,orbitSize:650,orbitDuration:16200,startAngle:200,description:"Home base.",xpRequired:0},{id:"mars",name:"Mars",color:"bg-red-500",size:"w-8 h-8",pixelSize:32,orbitSize:850,orbitDuration:30456,startAngle:300,description:"The Red Planet.",xpRequired:500},{id:"jupiter",name:"Jupiter",color:"bg-orange-200 shadow-inner",size:"w-24 h-24",pixelSize:96,orbitSize:1600,orbitDuration:192132,startAngle:60,description:"The Gas Giant.",xpRequired:1e3},{id:"saturn",name:"Saturn",color:"bg-yellow-200",size:"w-20 h-20",pixelSize:80,orbitSize:2400,orbitDuration:477252,startAngle:180,description:"Ringed majestic world.",xpRequired:2e3},{id:"uranus",name:"Uranus",color:"bg-cyan-300",size:"w-14 h-14",pixelSize:56,orbitSize:3400,orbitDuration:1360962,startAngle:270,description:"The Ice Giant.",xpRequired:3500},{id:"neptune",name:"Neptune",color:"bg-blue-700",size:"w-14 h-14",pixelSize:56,orbitSize:4400,orbitDuration:2669760,startAngle:90,description:"Windy and dark.",xpRequired:5e3}]}},function(e){e.O(0,[358,38,911,250,971,69,744],function(){return e(e.s=4621)}),_N_E=e.O()}]);