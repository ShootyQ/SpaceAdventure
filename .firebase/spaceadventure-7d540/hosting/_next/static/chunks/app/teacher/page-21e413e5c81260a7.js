(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[941],{8619:function(e,t,s){Promise.resolve().then(s.bind(s,6764))},6764:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return M}});var r=s(3827),a=s(8792),i=s(4090),n=s(7907),l=s(5032),o=s(3832),c=s(7451),d=s(6227),u=s(5421),h=s(2235),x=s(699),p=s(7404),m=s(4059),g=s(7326),b=s(9910),f=s(9496),v=s(1524),y=s(527),w=s(3854),j=s(3915),N=s(1708),k=s(6678),C=s(1657),z=s(8121),S=s(4499),E=s(9259),I=s(7805),P=s(8745),L=s(8371);function Z(){let{user:e}=(0,k.useAuth)(),[t,s]=(0,i.useState)(!1),[a,n]=(0,i.useState)(0),[l,o]=(0,i.useState)(null);(0,i.useEffect)(()=>{e&&(async()=>{let t=(0,z.JU)(S.db,"users/".concat(e.uid,"/settings/tutorial")),r=await (0,z.QT)(t);r.exists()&&r.data().hasSeenDashboard||setTimeout(()=>s(!0),1e3)})()},[e]),(0,i.useEffect)(()=>{if(!t)return;let e=()=>{let e=d[a];if(e.targetId){let t=document.getElementById(e.targetId);t?o(t.getBoundingClientRect()):o(null)}else o(null)},s=d[a];if(s.targetId){let t=document.getElementById(s.targetId);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(e,500))}else o(null);return e(),window.addEventListener("resize",e),window.addEventListener("scroll",e,!0),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e,!0)}},[a,t]);let c=async()=>{if(e){s(!1);try{await (0,z.pl)((0,z.JU)(S.db,"users/".concat(e.uid,"/settings/tutorial")),{hasSeenDashboard:!0},{merge:!0})}catch(e){console.error("Error saving tutorial state:",e)}}},d=[{title:"Welcome to ClassCrave",description:"Let's get your classroom set up for adventure. This quick guide will show you how to manage your students, rewards, and lessons."},{title:"1. Manage Roster",description:"Start here to add your students. You'll generate their unique login codes and assign them to your class fleet.",targetId:"tile-roster"},{title:"2. Rank Protocols",description:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{children:"Customize how much XP is needed for each rank."}),(0,r.jsxs)("div",{className:"bg-blue-50/10 p-2 rounded border border-blue-500/30 text-xs text-blue-200",children:[(0,r.jsx)("strong",{children:"Pro Tip:"}),(0,r.jsxs)("ul",{className:"list-disc pl-4 mt-1 space-y-1 opacity-80",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Younger Grades (K-3):"})," Keep thresholds low (e.g., 100 XP per rank). Award frequent, small amounts (1-5 XP)."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Older Grades (4+):"})," Use higher thresholds (e.g., 1000 XP). Making rankings feel more significant."]})]})]})]}),targetId:"tile-ranks"},{title:"3. Behavior Settings",description:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{children:"Define what earns XP in your classroom."}),(0,r.jsxs)("div",{className:"bg-yellow-50/10 p-2 rounded border border-yellow-500/30 text-xs text-yellow-200",children:[(0,r.jsx)("strong",{children:"Math Check:"})," Ideally, a student should rank up every 1-2 weeks. ",(0,r.jsx)("br",{}),"If a rank requires ",(0,r.jsx)("strong",{children:"500 XP"}),", and you give ",(0,r.jsx)("strong",{children:"50 XP"})," daily, they'll rank up in 10 days. Ensure your protocols match your pacing!"]})]}),targetId:"tile-rewards"},{title:"4. Co-Teachers",description:"Invite other educators to your classroom command deck. They'll have permission to award points and help manage missions.",targetId:"tile-team"},{title:"5. Planet Rewards",description:"Each planet serves as a major milestone. You can customize what real-world reward (like a pizza party or extra recess) is unlocked when the class reaches a new planet.",targetId:"tile-planets"},{title:"6. Asteroid Event",description:"Need a quick engagement boost? Launch an asteroid event! Students must earn XP quickly to destroy the asteroid before it hits.",targetId:"tile-asteroids"}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>{n(0),s(!0)},className:"fixed bottom-4 right-4 z-40 bg-white/10 hover:bg-white/20 text-white/50 hover:text-white p-2 text-xs rounded-full backdrop-blur-sm transition-all border border-white/5",children:"Help Guide"}),(0,r.jsx)(P.M,{children:t&&(0,r.jsxs)("div",{className:"fixed inset-0 z-50 overflow-hidden pointer-events-none",children:[l?(0,r.jsxs)(L.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-40",style:{pointerEvents:"auto"},children:[(0,r.jsx)("div",{className:"absolute transition-all duration-75 ease-out box-content border-black/80",style:{top:l.top,left:l.left,width:l.width,height:l.height,boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.7)",borderRadius:"12px"}}),(0,r.jsx)("div",{className:"absolute border-2 border-cyan-400 rounded-xl animate-pulse transition-all duration-75 ease-out",style:{top:l.top-4,left:l.left-4,width:l.width+8,height:l.height+8}})]}):(0,r.jsx)(L.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/80 backdrop-blur-sm z-40",onClick:()=>s(!1),style:{pointerEvents:"auto"}}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-50 pointer-events-none",children:(0,r.jsxs)(L.E.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0,...(()=>{if(!l)return{};if(window.innerWidth<768)return{position:"fixed",left:"50%",bottom:"24px",transform:"translateX(-50%)",width:"calc(100% - 32px)",maxWidth:"400px",margin:0,zIndex:60};let e=l.top<window.innerHeight/2,t=l.left+l.width/2-192;t=Math.max(20,Math.min(t,window.innerWidth-384-20));let s=window.innerHeight-(l.bottom+24)-20,r=l.top-24-20,a=0,i="auto",n="auto";return e?(i=l.bottom+24,a=s):(n=window.innerHeight-l.top+24,a=r),a<250&&(e&&r>s?(i="auto",n=window.innerHeight-l.top+24,a=r):!e&&s>r&&(n="auto",i=l.bottom+24,a=s)),{position:"absolute",left:t,top:i,bottom:n,width:"".concat(384,"px"),maxHeight:"".concat(Math.max(200,a),"px"),transform:"none",zIndex:60,display:"flex",flexDirection:"column"}})()},transition:{type:"spring",duration:.5},className:"bg-slate-900 text-slate-100 w-full max-w-sm rounded-2xl shadow-[0_0_50px_rgba(0,0,0,0.5)] border border-slate-700 relative overflow-hidden pointer-events-auto mx-4 flex flex-col",style:l?{margin:0}:{},children:[(0,r.jsxs)("div",{className:"bg-slate-950 p-4 border-b border-slate-800 flex justify-between items-center shrink-0",children:[(0,r.jsxs)("h3",{className:"font-bold text-cyan-400 uppercase tracking-widest text-sm",children:[a+1," / ",d.length]}),(0,r.jsx)("button",{onClick:()=>c(),className:"text-slate-500 hover:text-white",children:(0,r.jsx)(h.Z,{size:16})})]}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-white",children:d[a].title}),(0,r.jsx)("div",{className:"text-slate-400 text-sm leading-relaxed mb-6",children:d[a].description}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-4",children:[(0,r.jsx)("button",{onClick:()=>{a>0&&n(e=>e-1)},className:"text-slate-500 hover:text-white text-sm ".concat(0===a?"invisible":""),children:"Back"}),(0,r.jsxs)("button",{onClick:()=>{a<d.length-1?n(e=>e+1):c()},className:"bg-cyan-600 hover:bg-cyan-500 text-white px-5 py-2 rounded-lg font-bold flex items-center gap-2 transition-all shadow-lg hover:shadow-cyan-500/20",children:[a===d.length-1?"Finish":"Next",a===d.length-1?(0,r.jsx)(E.Z,{size:16}):(0,r.jsx)(I.Z,{size:16})]})]})]})]})})]})})]})}function M(){let{logout:e,user:t,userData:s}=(0,k.useAuth)();(0,n.usePathname)();let[N,E]=(0,i.useState)({current:0,target:1e4,reward:"Class Reward"}),[I,P]=(0,i.useState)(!1),[L,M]=(0,i.useState)({current:0,target:1e4,reward:""});(0,i.useEffect)(()=>{if(!t)return;let e=(0,z.JU)(S.db,"users/".concat(t.uid,"/settings"),"classBonus"),s=(0,z.cf)(e,t=>{t.exists()?E(t.data()):(0,z.pl)(e,{current:0,target:1e4,reward:"Class Reward"})});return()=>s()},[t]);let T=async()=>{if(t)try{await (0,z.pl)((0,z.JU)(S.db,"users/".concat(t.uid,"/settings"),"classBonus"),{...L,current:Number(L.current),target:Number(L.target)}),P(!1)}catch(e){console.error("Error saving bonus:",e)}};return(0,r.jsxs)("div",{className:"min-h-screen relative overflow-hidden flex flex-col text-cyan-400 font-mono",children:[(0,r.jsx)(Z,{}),(0,r.jsxs)("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[(0,r.jsx)("img",{src:(0,C.K)("/images/teacherbackground.png?v=2"),alt:"",className:"absolute inset-0 w-full h-full object-cover opacity-80"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-900/10 to-black/80"})]}),(0,r.jsxs)("header",{className:"z-10 flex flex-col md:flex-row justify-between items-center p-4 border-b border-cyan-500/30 bg-black/40 backdrop-blur-md gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"animate-pulse bg-cyan-500/20 p-2 rounded-full border border-cyan-400",children:(0,r.jsx)(l.Z,{size:20})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-xl font-bold tracking-widest uppercase flex items-center gap-3",children:["Command Deck // Teacher",(null==s?void 0:s.subscriptionStatus)==="active"?(0,r.jsx)("span",{className:"text-[10px] bg-green-500/20 text-green-400 border border-green-500/50 px-2 py-0.5 rounded uppercase tracking-widest font-normal",children:"Subscribed"}):(0,r.jsxs)(a.default,{href:"/teacher/settings?mode=billing",className:"text-[10px] bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-400 border border-yellow-500/50 px-2 py-0.5 rounded uppercase tracking-widest font-normal flex items-center gap-1 transition-colors",children:["Trial Version ",(0,r.jsx)("span",{className:"hidden sm:inline",children:"- Upgrade"})]})]}),(null==s?void 0:s.subscriptionStatus)==="active"&&(0,r.jsxs)("div",{className:"text-[10px] text-cyan-500/60 uppercase tracking-widest ml-1",children:["Active until: ",new Date(Date.now()+2592e6).toLocaleDateString()]})]})]}),(0,r.jsxs)("div",{className:"flex gap-4 text-xs tracking-wider items-center",children:[(0,r.jsxs)("div",{className:"flex flex-col items-end mr-4",children:[(0,r.jsx)("span",{className:"text-cyan-600",children:"STATUS"}),(0,r.jsx)("span",{className:"text-green-400",children:"ONLINE"})]}),(0,r.jsxs)("button",{onClick:e,className:"bg-black/40 hover:bg-red-950/30 border border-white/10 hover:border-red-500/50 text-white/50 hover:text-red-400 px-3 py-2 rounded-lg transition-all flex items-center gap-2",children:[(0,r.jsx)(o.Z,{size:16}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"LOGOUT"})]})]})]}),(0,r.jsxs)("main",{className:"flex-1 relative z-10 p-4 md:p-6 max-w-7xl mx-auto w-full flex flex-col gap-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{id:"tile-map",className:"lg:col-span-2 border border-cyan-500/30 rounded-2xl bg-black/80 backdrop-blur-sm relative overflow-hidden flex flex-col min-h-[220px] group transition-all hover:border-cyan-400/50 hover:shadow-[0_0_30px_rgba(6,182,212,0.15)]",children:[(0,r.jsxs)("div",{className:"absolute inset-0 z-0",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-[url('/images/teacherbackground.png')] bg-cover bg-center opacity-40 group-hover:scale-105 transition-transform duration-700"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-black/60 to-transparent"})]}),(0,r.jsxs)("div",{className:"relative z-10 p-8 flex flex-col justify-center h-full items-start",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)("div",{className:"p-2 bg-cyan-500/20 rounded-lg border border-cyan-500/50 text-cyan-300",children:(0,r.jsx)(c.Z,{size:24})}),(0,r.jsx)("span",{className:"text-cyan-400 font-bold uppercase tracking-widest text-sm",children:"Main Display"})]}),(0,r.jsx)("h2",{className:"text-3xl font-bold text-white mb-2 group-hover:text-cyan-100 transition-colors",children:"Solar System Map"}),(0,r.jsx)("p",{className:"text-cyan-300/60 text-base max-w-md mb-6",children:"Launch the primary classroom display. View student ships, current mission status, and planetary progress."}),(0,r.jsxs)(a.default,{href:"/teacher/map",className:"bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-3 rounded-xl font-bold uppercase tracking-wider text-sm flex items-center gap-2 shadow-lg shadow-cyan-900/20 hover:shadow-cyan-500/40 transition-all active:scale-95 border border-cyan-400/20",children:[(0,r.jsx)(d.Z,{className:"animate-pulse",size:18}),"Launch Big Screen"]})]}),(0,r.jsxs)("div",{className:"absolute top-8 right-8 flex flex-col gap-2 items-end opacity-50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-[10px] text-cyan-500 uppercase",children:[(0,r.jsx)("span",{children:"Orbit Sync"}),(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})]}),(0,r.jsx)("div",{className:"w-32 h-px bg-gradient-to-l from-cyan-500/50 to-transparent"}),(0,r.jsx)("div",{className:"w-20 h-px bg-gradient-to-l from-cyan-500/30 to-transparent"})]})]}),(0,r.jsxs)("div",{className:"lg:col-span-1 border border-cyan-500/30 bg-black/60 rounded-xl p-6 relative group flex flex-col justify-center",children:[(0,r.jsxs)("button",{onClick:()=>{M(N),P(!0)},className:"absolute top-3 right-3 flex items-center gap-2 px-3 py-1.5 bg-cyan-950/50 hover:bg-cyan-900/50 border border-cyan-500/30 rounded-lg text-cyan-400 transition-all z-20 group/edit",children:[(0,r.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Edit"}),(0,r.jsx)(u.Z,{size:14,className:"group-hover/edit:scale-110 transition-transform"})]}),I?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-[10px] uppercase text-cyan-600",children:"Current"}),(0,r.jsx)("input",{type:"number",value:L.current,onChange:e=>M({...L,current:Number(e.target.value)}),className:"w-full bg-black border border-cyan-800 rounded p-1 text-sm outline-none focus:border-cyan-400 text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-[10px] uppercase text-cyan-600",children:"Target"}),(0,r.jsx)("input",{type:"number",value:L.target,onChange:e=>M({...L,target:Number(e.target.value)}),className:"w-full bg-black border border-cyan-800 rounded p-1 text-sm outline-none focus:border-cyan-400 text-white"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-[10px] uppercase text-cyan-600",children:"Reward"}),(0,r.jsx)("input",{type:"text",value:L.reward,onChange:e=>M({...L,reward:e.target.value}),className:"w-full bg-black border border-cyan-800 rounded p-1 text-sm outline-none focus:border-cyan-400 text-white"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>P(!1),className:"p-1 text-red-500 hover:bg-white/10 rounded",children:(0,r.jsx)(h.Z,{size:16})}),(0,r.jsx)("button",{onClick:T,className:"p-1 text-green-500 hover:bg-white/10 rounded",children:(0,r.jsx)(x.Z,{size:16})})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4 text-cyan-300",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(p.Z,{size:24,className:"text-yellow-400"}),(0,r.jsx)("span",{className:"text-base font-bold uppercase tracking-wider",children:"Class Bonus"})]}),(0,r.jsxs)("span",{className:"text-sm text-yellow-400 font-bold",children:[N.current.toLocaleString()," / ",N.target.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"w-full bg-gray-900 rounded-full h-6 mb-4 border border-cyan-500/20 relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-yellow-400/10 animate-pulse"}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-yellow-600 to-yellow-400 h-full rounded-full transition-all duration-1000 shadow-[0_0_15px_rgba(250,204,21,0.5)]",style:{width:"".concat(Math.min(N.current/N.target*100,100),"%")}})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{className:"text-sm text-yellow-400/90 italic truncate font-bold",children:N.reward}),(0,r.jsx)("div",{className:"text-[10px] text-cyan-500/60 uppercase tracking-widest",children:"Shields Charging..."})]}),(0,r.jsx)("div",{className:"mt-2 text-[10px] text-cyan-500/40 leading-tight",children:"Earn XP together to unlock this reward. When the bar is full, you win!"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 pb-20",children:[(0,r.jsx)("div",{id:"tile-roster",children:(0,r.jsx)(R,{title:"Student Roster",icon:(0,r.jsx)(m.Z,{size:28}),desc:"Manage Students",href:"/teacher/roster",color:"text-blue-400",borderColor:"border-blue-500/30"})}),(0,r.jsx)("div",{id:"tile-ranks",children:(0,r.jsx)(R,{title:"Rank Thresholds",icon:(0,r.jsx)(g.Z,{size:28}),desc:"Edit XP Levels",href:"/teacher/settings?mode=ranks",color:"text-purple-400",borderColor:"border-purple-500/30"})}),(0,r.jsx)("div",{id:"tile-rewards",children:(0,r.jsx)(R,{title:"Behavior Settings",icon:(0,r.jsx)(p.Z,{size:28}),desc:"Edit Protocols",href:"/teacher/rewards",color:"text-white",borderColor:"border-yellow-500/30"})}),(0,r.jsx)("div",{id:"tile-avatar",children:(0,r.jsx)(R,{title:"My Teacher Avatar",icon:(0,r.jsx)(b.Z,{size:28}),desc:"Personal Config",href:"/teacher/settings",color:"text-cyan-400",borderColor:"border-cyan-500/30"})}),(0,r.jsx)("div",{id:"tile-lessons",children:(0,r.jsx)(R,{title:"Lesson Plans",icon:(0,r.jsx)(d.Z,{size:28}),desc:"Assign Missions",href:"/teacher/missions",color:"text-red-400",borderColor:"border-red-500/30"})}),(0,r.jsx)("div",{id:"tile-planets",children:(0,r.jsx)(R,{title:"Planet Rewards",icon:(0,r.jsx)(f.Z,{size:28}),desc:"Edit Milestones",href:"/teacher/planets",color:"text-teal-400",borderColor:"border-teal-500/30"})}),(0,r.jsx)("div",{id:"tile-asteroids",children:(0,r.jsx)(R,{title:"Asteroid Event",icon:(0,r.jsx)(v.Z,{size:28}),desc:"Launch Challenge",href:"/teacher/settings?mode=asteroids",color:"text-orange-400",borderColor:"border-orange-500/30"})}),(0,r.jsx)("div",{id:"tile-billing",children:(0,r.jsx)(R,{title:"Subscriptions",icon:(0,r.jsx)(y.Z,{size:28}),desc:"Billing",href:"/teacher/settings?mode=billing",color:"text-emerald-400",borderColor:"border-emerald-500/30"})}),(0,r.jsx)("div",{id:"tile-team",children:(0,r.jsx)(R,{title:"Manage Team",icon:(0,r.jsx)(w.Z,{size:28}),desc:"Co-Teachers",href:"/teacher/settings?mode=team",color:"text-indigo-400",borderColor:"border-indigo-500/30"})}),(0,r.jsx)("div",{id:"tile-print",children:(0,r.jsx)(R,{title:"Print Center",icon:(0,r.jsx)(j.Z,{size:28}),desc:"Badges & Cards",href:"/teacher/printables",color:"text-pink-400",borderColor:"border-pink-500/30"})}),(0,r.jsx)("div",{id:"tile-award",children:(0,r.jsx)(R,{title:"Award Points",icon:(0,r.jsx)(p.Z,{size:28}),desc:"Mobile Tool",href:"/teacher/rewards",color:"text-yellow-400",borderColor:"border-yellow-500/30"})})]})]})]})}function R(e){let{title:t,icon:s,desc:i,href:n,color:l,borderColor:o}=e;return(0,r.jsxs)(a.default,{href:n,className:"flex flex-col gap-3 p-6 rounded-xl border ".concat(o," bg-black/40 hover:bg-white/5 transition-all group relative overflow-hidden"),children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,r.jsx)("div",{className:"p-3 rounded-lg bg-white/5 w-fit ".concat(l," group-hover:scale-110 transition-transform duration-300"),children:s}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold text-lg text-white group-hover:text-cyan-300 transition-colors",children:t}),(0,r.jsx)("p",{className:"text-xs text-cyan-400/50 group-hover:text-cyan-400/80",children:i})]}),(0,r.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity transform translate-x-2 group-hover:translate-x-0",children:(0,r.jsx)(N.Z,{size:14,className:"text-cyan-500"})})]})}},6678:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return u},useAuth:function(){return h}});var r=s(3827),a=s(4090),i=s(7065),n=s(8121),l=s(4499),o=s(7907),c=s(1657);let d=(0,a.createContext)({});function u(e){let{children:t}=e,[s,u]=(0,a.useState)(null),[h,x]=(0,a.useState)(null),[p,m]=(0,a.useState)(!0),g=(0,o.useRouter)();(0,a.useEffect)(()=>{let e=(0,i.Aj)(l.I8,async e=>{if(u(e),e)try{let s=(0,n.JU)(l.db,"users",e.uid),r=await (0,n.QT)(s);if(r.exists()){let t=r.data(),a="andrewpcarlson85@gmail.com"===e.email,i={};if(a&&"teacher"!==t.role&&(console.log("Fixing Admin Role for Legacy User"),t.role="teacher",i.role="teacher"),"teacher"===t.role&&!t.classCode){console.log("Generating Class Code for existing teacher");let e=(0,c.a)();t.classCode=e,i.classCode=e}if(Object.keys(i).length>0)try{await (0,n.pl)(s,i,{merge:!0})}catch(e){console.warn("Could not update user profile in DB",e)}x(t)}else{var t;e.email;let r={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:"teacher",classCode:(0,c.a)(),status:"active",subscriptionStatus:"trial",schoolName:"",location:"earth",spaceship:{name:"SS "+((null===(t=e.displayName)||void 0===t?void 0:t.split(" ")[0])||"Voyager"),color:"text-blue-400",type:"scout",speed:1}};await (0,n.pl)(s,r),x(r)}}catch(t){console.error("Error fetching user data",t),"andrewpcarlson85@gmail.com"===e.email&&(console.log("Using Fallback Admin Profile due to DB error"),x({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:"teacher",status:"active",location:"earth",xp:9999,spaceship:{name:"SS Command (Fallback)",color:"text-yellow-400",type:"fighter",speed:2}}))}else x(null);m(!1)});return()=>e()},[]);let b=async()=>{try{await (0,i.rh)(l.I8,l.Vv)}catch(e){console.error("Login failed",e)}},f=async(e,t)=>{try{await (0,i.e5)(l.I8,e,t)}catch(e){throw console.error("Student Login Failed",e),e}},v=async()=>{await (0,i.w7)(l.I8),x(null),g.push("/")};return(0,r.jsx)(d.Provider,{value:{user:s,userData:h,loading:p,signInWithGoogle:b,signInStudent:f,logout:v},children:t})}let h=()=>(0,a.useContext)(d)},4499:function(e,t,s){"use strict";s.d(t,{I8:function(){return d},Vv:function(){return u},db:function(){return c},qe:function(){return l}});var r=s(6142),a=s(8121),i=s(7065),n=s(3493);let l={apiKey:"AIzaSyDVHiiCHkP-RFOI26cIrD_OijLnw1r3B8Q",authDomain:"spaceadventure-7d540.firebaseapp.com",projectId:"spaceadventure-7d540",storageBucket:"spaceadventure-7d540.firebasestorage.app",messagingSenderId:"546441300465",appId:"1:546441300465:web:28ae387d2bdbb8011a1c50",measurementId:"G-8R9PYL00XH"},o=(0,r.C6)().length>0?(0,r.Mq)():(0,r.ZF)(l),c=(0,a.ad)(o),d=(0,i.v0)(o),u=new i.hJ;(0,n.Gb)().then(e=>{e&&(0,n.IH)(o)})},1657:function(e,t,s){"use strict";s.d(t,{K:function(){return r},a:function(){return a}});let r=e=>{let t=e.startsWith("/")?e:"/".concat(e);return window.location.hostname.includes("github.io")?"https://shootyq.github.io/SpaceAdventure".concat(t):"".concat("").concat(t)},a=()=>{let e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",t="";for(let s=0;s<6;s++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}}},function(e){e.O(0,[358,38,911,250,55,562,971,69,744],function(){return e(e.s=8619)}),_N_E=e.O()}]);