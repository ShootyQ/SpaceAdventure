(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[723],{2070:function(e,a,t){Promise.resolve().then(t.bind(t,1086))},1086:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return z}});var n=t(3827),r=t(4090),s=t(8121),i=t(4499),l=t(3915),c=t(3854),o=t(2235),d=t(8994),u=t(6260),p=t(7461);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,p.Z)("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2h0a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"8ur5zv"}]]);var m=t(699);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,p.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var x=t(9259),b=t(7731),v=t(8792),y=t(3879),f=t(2225),j=t(6678),w=t(6142),N=t(7065);async function k(e,a){let t="student-creator-".concat(Date.now()),n=(0,w.ZF)(i.qe,t),r=(0,N.v0)(n);try{let t=await (0,N.Xb)(r,e,a);return await (0,N.w7)(r),t.user.uid}catch(e){throw console.error("Error creating student auth:",e),e}finally{await (0,w.P2)(n)}}var S=t(5802),C=t(1657);let H=[{id:"finalship",name:"Standard Interceptor",src:"/images/ships/finalship.png",type:"fighter"},{id:"alienship",name:"Alien Scout",src:"/images/ships/alienship.png",type:"scout"},{id:"jellyalienship",name:"Bio-Cruiser",src:"/images/ships/jellyalienship.png",type:"cruiser"},{id:"coconutship",name:"Tropical Drifter",src:"/images/ships/coconutship.png",type:"cruiser"},{id:"dragoneggship",name:"Dragon Scale Pod",src:"/images/ships/dragoneggship.png",type:"scout"}];function z(){var e;let{user:a,userData:t}=(0,j.useAuth)(),[p,w]=(0,r.useState)([]),[N,z]=(0,r.useState)(!0),[I,Z]=(0,r.useState)(!1),[A,L]=(0,r.useState)({name:"",username:"",password:""}),[R,P]=(0,r.useState)(S.W$[0].id),[D,M]=(0,r.useState)(H[0].id),[E,q]=(0,r.useState)(""),[_,F]=(0,r.useState)(!1),[U,T]=(0,r.useState)(null),[V,W]=(0,r.useState)({}),[O,K]=(0,r.useState)(!1),B=async()=>{if(a){z(!0);try{let e=(0,s.IO)((0,s.hJ)(i.db,"users"),(0,s.ar)("role","==","student"),(0,s.ar)("teacherId","==",a.uid)),t=(await (0,s.PL)(e)).docs.map(e=>({uid:e.id,...e.data()}));t.sort((e,a)=>(e.displayName||"").localeCompare(a.displayName||"")),w(t)}catch(e){console.error("Error fetching roster:",e)}z(!1)}};(0,r.useEffect)(()=>{B()},[a]);let J=async e=>{if(e.preventDefault(),"trial"===((null==t?void 0:t.subscriptionStatus)||"trial")&&p.length>=5){alert("TRIAL LIMIT REACHED: Upgrade clearance to recruit more cadets.");return}if(A.name&&A.username&&A.password){F(!0),q("");try{let e=A.username.toLowerCase().replace(/[^a-z0-9]/g,""),n=(null==t?void 0:t.classCode)||"default",r="".concat(e,".").concat(n,"@spaceadventure.local"),l=await k(r,A.password),c=H.find(e=>e.id===D)||H[0],o={uid:l,email:r,displayName:A.name,photoURL:null,role:"student",teacherId:a.uid,classCode:n,status:"active",xp:0,level:1,location:"earth",fuel:500,travelStatus:"idle",spaceship:{name:"SS ".concat(A.name.split(" ")[0]),color:"text-blue-400",type:c.type,speed:1,modelId:c.id,id:c.id},avatar:{avatarId:R,hue:0,skinHue:0,bgHue:240,bgSat:50,bgLight:20,activeHat:"none"},username:A.username,password:A.password};await (0,s.pl)((0,s.JU)(i.db,"users",l),o),w(e=>[...e,o]),L({name:"",username:"",password:""}),P(S.W$[0].id),M(H[0].id),Z(!1)}catch(e){console.error("Error creating student:",e),"auth/email-already-in-use"===e.code?q("Username already taken. Try another."):q("Failed to create student. "+e.message)}finally{F(!1)}}},G=e=>{T(e.uid),W({displayName:e.displayName,xp:e.xp||0,fuel:e.fuel||500,location:e.location||"earth",status:e.status,avatar:e.avatar,spaceship:e.spaceship}),K(!1)},$=async()=>{if(U)try{await (0,s.r7)((0,s.JU)(i.db,"users",U),V),w(e=>e.map(e=>e.uid===U?{...e,...V}:e)),T(null),K(!1)}catch(e){console.error("Error saving student:",e),alert("Failed to save changes.")}},Y=e=>{V.avatar&&W(a=>({...a,avatar:{...a.avatar,avatarId:e}}))},X=e=>{V.spaceship&&W(a=>({...a,spaceship:{...a.spaceship,id:e,modelId:e}}))},Q=async e=>{if(confirm("Are you sure you want to remove this cadet from the roster? This cannot be undone."))try{await (0,s.oe)((0,s.JU)(i.db,"users",e)),w(a=>a.filter(a=>a.uid!==e))}catch(e){console.error("Error removing student:",e)}},ee=async e=>{try{await (0,s.r7)((0,s.JU)(i.db,"users",e),{status:"active",role:"student",xp:0,fuel:500,location:"earth"}),w(a=>a.map(a=>a.uid===e?{...a,status:"active",role:"student",xp:0,fuel:500,location:"earth"}:a))}catch(e){console.error("Error approving:",e)}};return(0,n.jsx)("div",{className:"min-h-screen bg-space-950 p-6 font-mono text-cyan-400",children:(0,n.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-8",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(v.default,{href:"/teacher",className:"p-2 rounded-full border border-cyan-500/30 hover:bg-cyan-900/20 text-cyan-500",children:(0,n.jsx)(y.Z,{size:20})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold uppercase tracking-widest text-white",children:"Cadet Roster"}),(null==t?void 0:t.classCode)&&(0,n.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,n.jsx)("span",{className:"text-sm text-cyan-600",children:"CLASS CODE:"}),(0,n.jsx)("span",{className:"text-lg font-bold text-yellow-400 font-mono tracking-widest",children:t.classCode})]})]})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(v.default,{href:"/teacher/roster/print",className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 text-white font-bold uppercase rounded-lg transition-colors border border-white/20",children:[(0,n.jsx)(l.Z,{size:18}),(0,n.jsx)("span",{className:"hidden md:inline",children:"Print Cards"})]}),(0,n.jsxs)("button",{onClick:()=>Z(!0),className:"flex items-center gap-2 px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-black font-bold uppercase rounded-lg transition-colors",children:[(0,n.jsx)(c.Z,{size:18}),(0,n.jsx)("span",{className:"hidden md:inline",children:"Add Student"})]})]})]}),I&&(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:(0,n.jsxs)("form",{onSubmit:J,className:"w-full max-w-md bg-slate-900 border border-cyan-500/50 p-6 rounded-2xl shadow-[0_0_50px_rgba(0,255,255,0.1)] relative max-h-[90vh] overflow-y-auto custom-scrollbar",children:[(0,n.jsx)("button",{type:"button",onClick:()=>Z(!1),className:"absolute top-4 right-4 text-cyan-500 hover:text-white",children:(0,n.jsx)(o.Z,{size:24})}),(0,n.jsx)("h3",{className:"text-xl font-bold text-white mb-6 uppercase tracking-wider border-b border-cyan-900 pb-2",children:"New Cadet Profile"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-bold text-cyan-400 mb-1 uppercase tracking-wider",children:"Display Name"}),(0,n.jsx)("input",{autoFocus:!0,type:"text",value:A.name,onChange:e=>L({...A,name:e.target.value}),className:"w-full bg-black/50 border border-cyan-800 rounded-lg px-4 py-2 text-white focus:ring-1 focus:ring-cyan-400 outline-none",placeholder:"e.g. Cadet Tom"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-bold text-cyan-400 mb-1 uppercase tracking-wider",children:"Username"}),(0,n.jsx)("input",{type:"text",value:A.username,onChange:e=>L({...A,username:e.target.value.toLowerCase().replace(/[^a-z0-9]/g,"")}),className:"w-full bg-black/50 border border-cyan-800 rounded-lg px-4 py-2 text-white focus:ring-1 focus:ring-cyan-400 outline-none",placeholder:"tom99"}),(0,n.jsx)("p",{className:"text-[10px] text-cyan-600/80 mt-1 uppercase",children:"Login ID (No Spaces)"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-bold text-cyan-400 mb-1 uppercase tracking-wider",children:"Password"}),(0,n.jsx)("input",{type:"text",value:A.password,onChange:e=>L({...A,password:e.target.value}),className:"w-full bg-black/50 border border-cyan-800 rounded-lg px-4 py-2 text-white focus:ring-1 focus:ring-cyan-400 outline-none",placeholder:"Set Password"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-bold text-cyan-400 mb-2 uppercase tracking-wider",children:"Select Identity"}),(0,n.jsx)("div",{className:"grid grid-cols-4 gap-2",children:S.W$.map(e=>(0,n.jsx)("button",{type:"button",onClick:()=>P(e.id),className:"\n                                                relative aspect-square rounded-lg border-2 overflow-hidden bg-black/50 transition-all\n                                                ".concat(R===e.id?"border-cyan-400 ring-2 ring-cyan-500/20 scale-105":"border-white/10 hover:border-white/30","\n                                            "),children:(0,n.jsx)(S.Yt,{hue:0,skinHue:0,bgHue:240,bgSat:50,bgLight:20,hat:"none",avatarId:e.id,className:"w-full h-full"})},e.id))}),(0,n.jsx)("div",{className:"text-center mt-1 text-xs text-cyan-300 font-bold uppercase tracking-widest",children:null===(e=S.W$.find(e=>e.id===R))||void 0===e?void 0:e.name})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs font-bold text-cyan-400 mb-2 uppercase tracking-wider",children:"Select Vessel"}),(0,n.jsx)("div",{className:"grid grid-cols-3 gap-2",children:H.map(e=>(0,n.jsxs)("button",{type:"button",onClick:()=>M(e.id),className:"\n                                                relative p-2 rounded-lg border-2 flex flex-col items-center gap-1 bg-black/50 transition-all\n                                                ".concat(D===e.id?"border-cyan-400 ring-2 ring-cyan-500/20 bg-cyan-900/10":"border-white/10 hover:border-white/30","\n                                            "),children:[(0,n.jsx)("div",{className:"w-12 h-12 relative flex items-center justify-center",children:(0,n.jsx)("img",{src:(0,C.K)(e.src),alt:e.name,className:"object-contain max-w-full max-h-full"})}),(0,n.jsx)("div",{className:"text-[10px] uppercase font-bold text-center leading-tight text-gray-300",children:e.name})]},e.id))})]})]}),E&&(0,n.jsx)("div",{className:"mt-4 p-2 bg-red-900/20 border border-red-500/30 text-red-400 text-xs rounded uppercase tracking-wider",children:E}),(0,n.jsxs)("div",{className:"flex gap-3 mt-8",children:[(0,n.jsx)("button",{type:"button",onClick:()=>Z(!1),className:"flex-1 bg-slate-800 hover:bg-slate-700 text-gray-400 hover:text-white py-3 rounded-lg font-bold transition-colors uppercase tracking-wider text-xs",children:"Cancel"}),(0,n.jsxs)("button",{type:"submit",disabled:_,className:"flex-1 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-50 text-black py-3 rounded-lg font-bold transition-colors flex items-center justify-center gap-2 uppercase tracking-wider text-xs shadow-[0_0_20px_rgba(8,145,178,0.4)]",children:[_&&(0,n.jsx)(d.Z,{className:"w-4 h-4 animate-spin"}),"Register"]})]})]})}),N?(0,n.jsx)("div",{className:"flex justify-center py-20",children:(0,n.jsx)(d.Z,{size:40,className:"animate-spin text-cyan-500"})}):(0,n.jsxs)("div",{className:"grid gap-4",children:[(0,n.jsxs)("div",{className:"hidden md:grid grid-cols-12 gap-4 px-6 py-3 bg-cyan-950/30 border-b border-cyan-500/20 text-cyan-500 uppercase text-xs font-bold tracking-wider",children:[(0,n.jsx)("div",{className:"col-span-3",children:"Cadet Identity"}),(0,n.jsx)("div",{className:"col-span-2 text-center",children:"Status"}),(0,n.jsx)("div",{className:"col-span-2 text-center",children:"Experience"}),(0,n.jsx)("div",{className:"col-span-2 text-center",children:"Reserves"}),(0,n.jsx)("div",{className:"col-span-2 text-center",children:"Location"}),(0,n.jsx)("div",{className:"col-span-1 text-right",children:"Actions"})]}),p.map(e=>{var a;return(0,n.jsx)("div",{className:"\n                            relative grid grid-cols-1 md:grid-cols-12 gap-4 items-center p-6 md:p-4 rounded-xl border transition-all\n                            ".concat("pending_approval"===e.status?"bg-yellow-900/10 border-yellow-500/30":"bg-black/40 border-cyan-900/30 hover:border-cyan-500/30","\n                        "),children:U===e.uid?(0,n.jsxs)("div",{className:"col-span-12 grid grid-cols-1 md:grid-cols-12 gap-4",children:[(0,n.jsxs)("div",{className:"col-span-12 md:col-span-3 flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{onClick:()=>K(!O),className:"w-10 h-10 rounded-full border-2 border-cyan-500 overflow-hidden relative shrink-0 hover:scale-110 transition-transform bg-cyan-900/30",title:"Configure Visuals",children:(0,n.jsx)(S.Yt,{userData:{avatar:V.avatar},className:"w-full h-full"})}),(0,n.jsx)("input",{value:V.displayName||"",onChange:e=>W({...V,displayName:e.target.value}),className:"w-full bg-black border border-cyan-500 px-2 py-1 rounded text-white"})]}),(0,n.jsx)("button",{onClick:()=>K(!O),className:"text-[10px] text-cyan-400 uppercase font-bold tracking-wider hover:text-white text-left px-1",children:O?"- Close Visuals":"+ Change Avatar / Ship"})]}),O&&(0,n.jsx)("div",{className:"col-span-12 bg-black/60 border border-cyan-500/30 rounded-xl p-4 mb-2",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-xs text-white uppercase font-bold mb-2",children:"Avatar"}),(0,n.jsx)("div",{className:"grid grid-cols-5 gap-2",children:S.W$.map(e=>{var a;return(0,n.jsx)("button",{onClick:()=>Y(e.id),className:"aspect-square rounded border overflow-hidden ".concat((null===(a=V.avatar)||void 0===a?void 0:a.avatarId)===e.id?"border-cyan-400 ring-1 ring-cyan-500":"border-white/10 opacity-50 hover:opacity-100"),children:(0,n.jsx)(S.Yt,{hue:0,skinHue:0,bgHue:240,bgSat:50,bgLight:20,hat:"none",avatarId:e.id,className:"w-full h-full"})},e.id)})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-xs text-white uppercase font-bold mb-2",children:"Spaceship"}),(0,n.jsx)("div",{className:"grid grid-cols-3 gap-2",children:H.map(e=>{var a,t;return(0,n.jsxs)("button",{onClick:()=>X(e.id),className:"p-1 rounded border flex flex-col items-center justify-center ".concat(((null===(a=V.spaceship)||void 0===a?void 0:a.modelId)||(null===(t=V.spaceship)||void 0===t?void 0:t.id))===e.id?"border-cyan-400 bg-cyan-900/20":"border-white/10 opacity-50 hover:opacity-100"),children:[(0,n.jsx)("img",{src:(0,C.K)(e.src),className:"w-8 h-8 object-contain"}),(0,n.jsx)("span",{className:"text-[8px] uppercase mt-1 text-center",children:e.name})]},e.id)})})]})]})}),!O&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"col-span-12 md:col-span-2",children:(0,n.jsxs)("select",{value:V.status,onChange:e=>W({...V,status:e.target.value}),className:"w-full bg-black border border-cyan-500 px-2 py-1 rounded text-white text-xs",children:[(0,n.jsx)("option",{value:"active",children:"Active"}),(0,n.jsx)("option",{value:"pending_approval",children:"Pending"}),(0,n.jsx)("option",{value:"rejected",children:"Suspended"})]})}),(0,n.jsx)("div",{className:"col-span-12 md:col-span-2",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(u.Z,{size:14,className:"text-yellow-500"}),(0,n.jsx)("input",{type:"number",value:V.xp,onChange:e=>W({...V,xp:parseInt(e.target.value)||0}),className:"w-full bg-black border border-cyan-500 px-2 py-1 rounded text-white"})]})}),(0,n.jsx)("div",{className:"col-span-12 md:col-span-2",children:(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(h,{size:14,className:"text-orange-500"}),(0,n.jsx)("input",{type:"number",value:V.fuel,onChange:e=>W({...V,fuel:parseInt(e.target.value)||0}),className:"w-full bg-black border border-cyan-500 px-2 py-1 rounded text-white"})]})}),(0,n.jsx)("div",{className:"col-span-12 md:col-span-2",children:(0,n.jsxs)("select",{value:V.location,onChange:e=>W({...V,location:e.target.value}),className:"w-full bg-black border border-cyan-500 px-2 py-1 rounded text-white text-xs uppercase",children:[(0,n.jsx)("option",{value:"earth",children:"Earth"}),f.H.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})})]}),(0,n.jsxs)("div",{className:"col-span-12 md:col-span-1 flex justify-end gap-2",children:[(0,n.jsx)("button",{onClick:$,className:"p-2 bg-green-600 rounded text-white hover:bg-green-500",children:(0,n.jsx)(m.Z,{size:16})}),(0,n.jsx)("button",{onClick:()=>T(null),className:"p-2 bg-red-600 rounded text-white hover:bg-red-500",children:(0,n.jsx)(o.Z,{size:16})})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"col-span-12 md:col-span-3 flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center overflow-hidden border ".concat("pending_approval"===e.status?"bg-yellow-900 border-yellow-500":"bg-cyan-900/30 border-cyan-500/30"),children:(0,n.jsx)(S.Yt,{userData:e,className:"w-full h-full"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-bold text-white text-lg md:text-base",children:e.displayName}),(0,n.jsx)("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:e.email||(0,n.jsx)("span",{className:"text-gray-600 italic",children:"Offline Account"})})]})]}),(0,n.jsx)("div",{className:"col-span-6 md:col-span-2 flex md:justify-center items-center gap-2",children:"pending_approval"===e.status?(0,n.jsx)("span",{className:"px-2 py-1 bg-yellow-500/20 text-yellow-200 text-xs uppercase font-bold rounded border border-yellow-500/50",children:"Details Pending"}):(0,n.jsx)("span",{className:"px-2 py-1 bg-green-500/20 text-green-200 text-xs uppercase font-bold rounded border border-green-500/50",children:"Active Duty"})}),(0,n.jsxs)("div",{className:"col-span-6 md:col-span-2 flex md:justify-center items-center gap-2 text-yellow-400",children:[(0,n.jsx)(u.Z,{size:16}),(0,n.jsxs)("span",{className:"font-bold",children:[e.xp||0," XP"]})]}),(0,n.jsxs)("div",{className:"col-span-6 md:col-span-2 flex md:justify-center items-center gap-2 text-orange-400",children:[(0,n.jsx)(h,{size:16}),(0,n.jsx)("span",{className:"font-bold",children:e.fuel||500})]}),(0,n.jsxs)("div",{className:"col-span-6 md:col-span-2 flex md:justify-center items-center gap-2 text-cyan-300 uppercase text-xs font-bold",children:[(0,n.jsx)(g,{size:16}),(0,n.jsx)("span",{children:(null===(a=f.H.find(a=>a.id===e.location))||void 0===a?void 0:a.name)||"Earth"})]}),(0,n.jsx)("div",{className:"col-span-12 md:col-span-1 flex justify-end gap-2 border-t md:border-t-0 border-white/10 pt-4 md:pt-0 mt-2 md:mt-0",children:"pending_approval"===e.status?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>ee(e.uid),title:"Approve",className:"p-2 bg-green-900/50 text-green-400 rounded-lg hover:bg-green-900 border border-green-500/30",children:(0,n.jsx)(x.Z,{size:16})}),(0,n.jsx)("button",{onClick:()=>Q(e.uid),title:"Reject",className:"p-2 bg-red-900/50 text-red-400 rounded-lg hover:bg-red-900 border border-red-500/30",children:(0,n.jsx)(o.Z,{size:16})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>G(e),title:"Edit Cadet",className:"p-2 hover:bg-cyan-900/50 text-cyan-400 rounded-lg transition-colors",children:(0,n.jsx)(b.Z,{size:16})}),(0,n.jsx)("button",{onClick:()=>Q(e.uid),title:"Remove Cadet",className:"p-2 hover:bg-red-900/50 text-red-400 rounded-lg transition-colors opacity-50 hover:opacity-100",children:(0,n.jsx)(o.Z,{size:16})})]})})]})},e.uid)}),!N&&0===p.length&&(0,n.jsx)("div",{className:"text-center py-20 text-gray-500",children:"No cadets found. Add some to begin the mission."})]})]})})}},5802:function(e,a,t){"use strict";t.d(a,{Cn:function(){return l},Ic:function(){return i},W$:function(){return s},Yt:function(){return c}});var n=t(3827),r=t(1657);let s=[{id:"bunny",name:"Space Bunny",src:"/images/avatar/spacebunny.png"},{id:"cat",name:"Cosmic Cat",src:"/images/avatar/spacecat.png"},{id:"raccoon",name:"Rocket Raccoon",src:"/images/avatar/spaceraccoon.png"},{id:"otter",name:"Orbit Otter",src:"/images/avatar/spaceotter.png"},{id:"pup",name:"Pluto Pup",src:"/images/avatar/spacepup.png"},{id:"hamster",name:"Hyper Hamster",src:"/images/avatar/spacehamster.png"},{id:"owl",name:"Omega Owl",src:"/images/avatar/spaceowl.png"},{id:"penguin",name:"Power Penguin",src:"/images/avatar/spacepenguin.png"},{id:"turtle",name:"Turbo Turtle",src:"/images/avatar/spaceturtle.png"}],i=[{id:"p1",name:"Cadet Blue",config:{hue:0,skinHue:200,bgHue:240,bgSat:60,bgLight:50,activeHat:"none",avatarId:"bunny"}},{id:"p2",name:"Crimson Guard",config:{hue:350,skinHue:0,bgHue:0,bgSat:70,bgLight:40,activeHat:"none",avatarId:"cat"}},{id:"p3",name:"Forest Ranger",config:{hue:120,skinHue:100,bgHue:120,bgSat:50,bgLight:60,activeHat:"none",avatarId:"raccoon"}},{id:"p4",name:"Solar Pilot",config:{hue:45,skinHue:60,bgHue:40,bgSat:90,bgLight:70,activeHat:"none",avatarId:"otter"}},{id:"p5",name:"Void Walker",config:{hue:270,skinHue:260,bgHue:280,bgSat:40,bgLight:20,activeHat:"none",avatarId:"pup"}},{id:"p6",name:"Neon Scout",config:{hue:180,skinHue:300,bgHue:320,bgSat:100,bgLight:50,activeHat:"none",avatarId:"cat"}},{id:"p7",name:"Rusty Mechanic",config:{hue:25,skinHue:30,bgHue:15,bgSat:50,bgLight:40,activeHat:"none",avatarId:"raccoon"}},{id:"p8",name:"Ice Specialist",config:{hue:190,skinHue:180,bgHue:200,bgSat:70,bgLight:90,activeHat:"none",avatarId:"bunny"}}],l=[{id:"none",name:"No Hat",src:"",style:""},{id:"hat1",name:"Helmet",src:"/images/hats/helmet1.png",style:"scale-[2.5] translate-y-[45%]"},{id:"hat2",name:"Fedora",src:"/images/hats/hat2.png",style:"scale-[0.9] -translate-y-[40%]"},{id:"hat3",name:"Top Hat",src:"/images/hats/tophat.png",style:"scale-[0.9] -translate-y-[40%]"},{id:"hat4",name:"Cowboy Hat",src:"/images/hats/cowboyhat.png",style:"scale-[0.9] -translate-y-[40%]"},{id:"hat5",name:"Dungan Doves Cap",src:"/images/hats/dungandoves.png",style:"scale-[0.9] -translate-y-[40%]"}],c=e=>{var a,t,i,c,o,d,u,p,h,m,g,x,b,v,y,f,j;let{userData:w,hue:N,skinHue:k,bgHue:S,bgSat:C,bgLight:H,hat:z,avatarId:I,className:Z=""}=e,A=null!==(h=null!=N?N:null==w?void 0:null===(a=w.avatar)||void 0===a?void 0:a.hue)&&void 0!==h?h:0,L=null!==(m=null!=k?k:null==w?void 0:null===(t=w.avatar)||void 0===t?void 0:t.skinHue)&&void 0!==m?m:0,R=null!==(g=null!=S?S:null==w?void 0:null===(i=w.avatar)||void 0===i?void 0:i.bgHue)&&void 0!==g?g:260,P=null!==(x=null!=C?C:null==w?void 0:null===(c=w.avatar)||void 0===c?void 0:c.bgSat)&&void 0!==x?x:50,D=null!==(b=null!=H?H:null==w?void 0:null===(o=w.avatar)||void 0===o?void 0:o.bgLight)&&void 0!==b?b:20,M=null!==(v=null!=I?I:null==w?void 0:null===(d=w.avatar)||void 0===d?void 0:d.avatarId)&&void 0!==v?v:"bunny",E=s.find(e=>e.id===M)||s[0],q=(null==E?void 0:E.src)||"/images/avatar/spacebunny.png",_=null!==(j=null!==(f=null!==(y=null!=z?z:null==w?void 0:w.activeHat)&&void 0!==y?y:null==w?void 0:null===(u=w.avatar)||void 0===u?void 0:u.activeHat)&&void 0!==f?f:null==w?void 0:null===(p=w.avatar)||void 0===p?void 0:p.hat)&&void 0!==j?j:"none",F=l.find(e=>e.id===_),U=null==F?void 0:F.src,T=(null==F?void 0:F.style)||"scale-100";return(0,n.jsxs)("div",{className:"relative ".concat(Z),style:{backgroundColor:"hsl(".concat(R,", ").concat(P,"%, ").concat(D,"%)")},children:[(0,n.jsx)("div",{className:"absolute inset-0 z-0",style:{backgroundColor:"hsl(".concat(L,", 70%, 50%)"),maskImage:"url(".concat((0,r.K)(q),")"),WebkitMaskImage:"url(".concat((0,r.K)(q),")"),maskSize:"cover"}}),(0,n.jsx)("img",{src:(0,r.K)(q),alt:"Avatar",className:"w-full h-full object-cover relative z-10",style:{filter:"hue-rotate(".concat(A,"deg)")}}),U&&(0,n.jsx)("img",{src:(0,r.K)(U),alt:"Accessory",className:"absolute inset-0 z-20 w-full h-full object-cover pointer-events-none transition-transform ".concat(T),onError:e=>console.error("Error loading hat:",U,(0,r.K)(U))})]})}},6678:function(e,a,t){"use strict";t.r(a),t.d(a,{AuthProvider:function(){return u},useAuth:function(){return p}});var n=t(3827),r=t(4090),s=t(7065),i=t(8121),l=t(4499),c=t(7907),o=t(1657);let d=(0,r.createContext)({});function u(e){let{children:a}=e,[t,u]=(0,r.useState)(null),[p,h]=(0,r.useState)(null),[m,g]=(0,r.useState)(!0),x=(0,c.useRouter)();(0,r.useEffect)(()=>{let e=(0,s.Aj)(l.I8,async e=>{if(u(e),e)try{let t=(0,i.JU)(l.db,"users",e.uid),n=await (0,i.QT)(t);if(n.exists()){let a=n.data(),r="andrewpcarlson85@gmail.com"===e.email,s={};if(r&&"teacher"!==a.role&&(console.log("Fixing Admin Role for Legacy User"),a.role="teacher",s.role="teacher"),"teacher"===a.role&&!a.classCode){console.log("Generating Class Code for existing teacher");let e=(0,o.a)();a.classCode=e,s.classCode=e}if(Object.keys(s).length>0)try{await (0,i.pl)(t,s,{merge:!0})}catch(e){console.warn("Could not update user profile in DB",e)}h(a)}else{var a;e.email;let n={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:"teacher",classCode:(0,o.a)(),status:"active",subscriptionStatus:"trial",schoolName:"",location:"earth",spaceship:{name:"SS "+((null===(a=e.displayName)||void 0===a?void 0:a.split(" ")[0])||"Voyager"),color:"text-blue-400",type:"scout",speed:1}};await (0,i.pl)(t,n),h(n)}}catch(a){console.error("Error fetching user data",a),"andrewpcarlson85@gmail.com"===e.email&&(console.log("Using Fallback Admin Profile due to DB error"),h({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:"teacher",status:"active",location:"earth",xp:9999,spaceship:{name:"SS Command (Fallback)",color:"text-yellow-400",type:"fighter",speed:2}}))}else h(null);g(!1)});return()=>e()},[]);let b=async()=>{try{await (0,s.rh)(l.I8,l.Vv)}catch(e){console.error("Login failed",e)}},v=async(e,a)=>{try{await (0,s.e5)(l.I8,e,a)}catch(e){throw console.error("Student Login Failed",e),e}},y=async()=>{await (0,s.w7)(l.I8),h(null),x.push("/")};return(0,n.jsx)(d.Provider,{value:{user:t,userData:p,loading:m,signInWithGoogle:b,signInStudent:v,logout:y},children:a})}let p=()=>(0,r.useContext)(d)},4499:function(e,a,t){"use strict";t.d(a,{I8:function(){return d},Vv:function(){return u},db:function(){return o},qe:function(){return l}});var n=t(6142),r=t(8121),s=t(7065),i=t(3493);let l={apiKey:"AIzaSyDVHiiCHkP-RFOI26cIrD_OijLnw1r3B8Q",authDomain:"spaceadventure-7d540.firebaseapp.com",projectId:"spaceadventure-7d540",storageBucket:"spaceadventure-7d540.firebasestorage.app",messagingSenderId:"546441300465",appId:"1:546441300465:web:28ae387d2bdbb8011a1c50",measurementId:"G-8R9PYL00XH"},c=(0,n.C6)().length>0?(0,n.Mq)():(0,n.ZF)(l),o=(0,r.ad)(c),d=(0,s.v0)(c),u=new s.hJ;(0,i.Gb)().then(e=>{e&&(0,i.IH)(c)})},1657:function(e,a,t){"use strict";t.d(a,{K:function(){return n},a:function(){return r}});let n=e=>{let a=e.startsWith("/")?e:"/".concat(e);return window.location.hostname.includes("github.io")?"https://shootyq.github.io/SpaceAdventure".concat(a):"".concat("").concat(a)},r=()=>{let e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",a="";for(let t=0;t<6;t++)a+=e.charAt(Math.floor(Math.random()*e.length));return a}},7461:function(e,a,t){"use strict";t.d(a,{Z:function(){return i}});var n=t(4090),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,a)=>{let t=(0,n.forwardRef)((t,i)=>{let{color:l="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:u="",children:p,...h}=t;return(0,n.createElement)("svg",{ref:i,...r,width:c,height:c,stroke:l,strokeWidth:d?24*Number(o)/Number(c):o,className:["lucide","lucide-".concat(s(e)),u].join(" "),...h},[...a.map(e=>{let[a,t]=e;return(0,n.createElement)(a,t)}),...Array.isArray(p)?p:[p]])});return t.displayName="".concat(e),t}},3879:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(7461).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9259:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(7461).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8994:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(7461).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7731:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(7461).Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},3915:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(7461).Z)("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]])},699:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(7461).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},6260:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(7461).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},3854:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(7461).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},2235:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(7461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8792:function(e,a,t){"use strict";t.d(a,{default:function(){return r.a}});var n=t(5250),r=t.n(n)},7907:function(e,a,t){"use strict";var n=t(5313);t.o(n,"usePathname")&&t.d(a,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(a,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(a,{useSearchParams:function(){return n.useSearchParams}})},2225:function(e,a,t){"use strict";t.d(a,{H:function(){return n}});let n=[{id:"sun",name:"The Sun",color:"bg-yellow-500 shadow-[0_0_100px_#eab308]",size:"w-32 h-32",pixelSize:128,orbitSize:0,orbitDuration:0,startAngle:0,description:"The burning core of our system.",xpRequired:0},{id:"mercury",name:"Mercury",color:"bg-gray-400",size:"w-6 h-6",pixelSize:24,orbitSize:300,orbitDuration:3888,startAngle:45,description:"Hot, fast, and rocky.",xpRequired:100},{id:"venus",name:"Venus",color:"bg-orange-300",size:"w-8 h-8",pixelSize:32,orbitSize:450,orbitDuration:9963,startAngle:120,description:"Wrapped in thick clouds.",xpRequired:250},{id:"earth",name:"Earth",color:"bg-blue-500",size:"w-10 h-10",pixelSize:40,orbitSize:650,orbitDuration:16200,startAngle:200,description:"Home base.",xpRequired:0},{id:"mars",name:"Mars",color:"bg-red-500",size:"w-8 h-8",pixelSize:32,orbitSize:850,orbitDuration:30456,startAngle:300,description:"The Red Planet.",xpRequired:500},{id:"jupiter",name:"Jupiter",color:"bg-orange-200 shadow-inner",size:"w-24 h-24",pixelSize:96,orbitSize:1600,orbitDuration:192132,startAngle:60,description:"The Gas Giant.",xpRequired:1e3},{id:"saturn",name:"Saturn",color:"bg-yellow-200",size:"w-20 h-20",pixelSize:80,orbitSize:2400,orbitDuration:477252,startAngle:180,description:"Ringed majestic world.",xpRequired:2e3},{id:"uranus",name:"Uranus",color:"bg-cyan-300",size:"w-14 h-14",pixelSize:56,orbitSize:3400,orbitDuration:1360962,startAngle:270,description:"The Ice Giant.",xpRequired:3500},{id:"neptune",name:"Neptune",color:"bg-blue-700",size:"w-14 h-14",pixelSize:56,orbitSize:4400,orbitDuration:2669760,startAngle:90,description:"Windy and dark.",xpRequired:5e3}]}},function(e){e.O(0,[358,38,911,250,971,69,744],function(){return e(e.s=2070)}),_N_E=e.O()}]);