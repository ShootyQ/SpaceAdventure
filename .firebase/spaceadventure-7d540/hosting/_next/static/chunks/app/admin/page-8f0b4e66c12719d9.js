(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{3630:function(e,t,s){Promise.resolve().then(s.bind(s,2532))},2532:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r=s(3827),a=s(4090),n=s(8121),i=s(4499),c=s(7326),l=s(7461);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,l.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var d=s(8994),u=s(1213),h=s(3616);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,l.Z)("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);var p=s(9259),m=s(2235),b=s(7731);function f(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)(!0),[f,g]=(0,a.useState)(""),[y,v]=(0,a.useState)(null),[N,j]=(0,a.useState)({schoolName:"",subscriptionStatus:"trial"}),w=async()=>{l(!0);try{let e=(0,n.IO)((0,n.hJ)(i.db,"users")),s=(await (0,n.PL)(e)).docs.map(e=>({uid:e.id,...e.data()})),r=s.filter(e=>"teacher"===e.role),a=s.filter(e=>"student"===e.role),c=r.map(e=>{let t=a.filter(t=>t.teacherId===e.uid).length;return{...e,studentCount:t,subscriptionStatus:e.subscriptionStatus||"trial",schoolName:e.schoolName||""}});t(c)}catch(e){console.error("Admin Fetch Error:",e)}finally{l(!1)}};(0,a.useEffect)(()=>{w()},[]);let k=e.filter(e=>{var t,s,r;return(null===(t=e.displayName)||void 0===t?void 0:t.toLowerCase().includes(f.toLowerCase()))||(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(f.toLowerCase()))||(null===(r=e.schoolName)||void 0===r?void 0:r.toLowerCase().includes(f.toLowerCase()))}),C=e=>{v(e.uid),j({schoolName:e.schoolName||"",subscriptionStatus:e.subscriptionStatus||"trial"})},S=async e=>{try{await (0,n.r7)((0,n.JU)(i.db,"users",e),{schoolName:N.schoolName,subscriptionStatus:N.subscriptionStatus}),t(t=>t.map(t=>t.uid===e?{...t,schoolName:N.schoolName,subscriptionStatus:N.subscriptionStatus}:t)),v(null)}catch(e){console.error("Save failed:",e),alert("Failed to save changes.")}};return(0,r.jsxs)("div",{className:"p-8 max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-4xl font-black uppercase tracking-widest text-white flex items-center gap-3",children:[(0,r.jsx)(c.Z,{className:"text-red-500",size:40})," Admin Command"]}),(0,r.jsx)("p",{className:"text-gray-400 mt-2",children:"Oversee fleet commanders and subscription clearances."})]}),(0,r.jsx)("button",{onClick:w,className:"px-4 py-2 bg-white/5 border border-white/10 hover:bg-white/10 rounded uppercase text-xs font-bold tracking-widest transition",children:"Refresh Data"})]}),(0,r.jsxs)("div",{className:"mb-6 relative",children:[(0,r.jsx)(o,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",size:20}),(0,r.jsx)("input",{type:"text",placeholder:"Search by Name, Email, or Classroom...",value:f,onChange:e=>g(e.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-cyan-500 transition"})]}),s?(0,r.jsx)("div",{className:"flex justify-center p-20",children:(0,r.jsx)(d.Z,{className:"animate-spin text-cyan-500",size:48})}):(0,r.jsx)("div",{className:"border border-white/10 rounded-xl overflow-hidden bg-black/20 backdrop-blur-sm",children:(0,r.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-white/5 border-b border-white/10 text-xs text-gray-400 uppercase tracking-widest",children:[(0,r.jsx)("th",{className:"p-4 font-bold",children:"Commander / Email"}),(0,r.jsx)("th",{className:"p-4 font-bold",children:"Classroom Designation"}),(0,r.jsx)("th",{className:"p-4 font-bold text-center",children:"Cadets"}),(0,r.jsx)("th",{className:"p-4 font-bold text-center",children:"Clearance Status"}),(0,r.jsx)("th",{className:"p-4 font-bold text-right",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-white/5",children:k.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-white/5 transition group",children:[(0,r.jsx)("td",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-900 to-black border border-white/10 flex items-center justify-center text-cyan-500",children:(0,r.jsx)(u.Z,{size:20})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-bold text-white max-w-[200px] truncate",title:e.displayName||"",children:e.displayName||"Unknown"}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.email})]})]})}),(0,r.jsx)("td",{className:"p-4",children:y===e.uid?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(h.Z,{size:16,className:"text-gray-500 shrink-0"}),(0,r.jsx)("input",{autoFocus:!0,type:"text",value:N.schoolName,onChange:e=>j({...N,schoolName:e.target.value}),className:"bg-black/50 border border-cyan-500/50 rounded px-2 py-1 text-sm text-white w-full focus:outline-none",placeholder:"e.g. Mr. S 5th Grade"})]}):(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-300",children:[(0,r.jsx)(h.Z,{size:16,className:e.schoolName?"text-cyan-500":"text-gray-600"}),e.schoolName||(0,r.jsx)("span",{className:"text-gray-600 italic text-xs",children:"No Designation"})]})}),(0,r.jsx)("td",{className:"p-4 text-center",children:(0,r.jsxs)("div",{className:"inline-flex flex-col items-center",children:[(0,r.jsx)("span",{className:"text-lg font-bold text-white",children:e.studentCount}),"trial"===e.subscriptionStatus&&e.studentCount>=5&&(0,r.jsx)("span",{className:"text-[9px] bg-red-900/50 text-red-300 px-1.5 rounded uppercase font-bold tracking-tight",children:"Cap Reached"})]})}),(0,r.jsx)("td",{className:"p-4 text-center",children:y===e.uid?(0,r.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>j({...N,subscriptionStatus:"trial"}),className:"px-3 py-1 text-xs font-bold rounded border uppercase ".concat("trial"===N.subscriptionStatus?"bg-gray-700 border-gray-500 text-white":"bg-transparent border-gray-700 text-gray-500"),children:"Trial"}),(0,r.jsx)("button",{onClick:()=>j({...N,subscriptionStatus:"active"}),className:"px-3 py-1 text-xs font-bold rounded border uppercase ".concat("active"===N.subscriptionStatus?"bg-green-900 border-green-500 text-green-300":"bg-transparent border-gray-700 text-gray-500"),children:"Full"})]}):(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full border text-xs font-bold uppercase tracking-wider\n                                                ".concat("active"===e.subscriptionStatus?"bg-green-500/10 border-green-500/30 text-green-400":"bg-yellow-500/10 border-yellow-500/30 text-yellow-400","\n                                            "),children:["active"===e.subscriptionStatus?(0,r.jsx)(x,{size:12}):(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-yellow-400 animate-pulse"}),"active"===e.subscriptionStatus?"Active":"Trial"]})}),(0,r.jsx)("td",{className:"p-4 text-right",children:y===e.uid?(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>S(e.uid),className:"p-2 bg-green-900/50 hover:bg-green-900 text-green-400 rounded-lg transition",children:(0,r.jsx)(p.Z,{size:18})}),(0,r.jsx)("button",{onClick:()=>v(null),className:"p-2 bg-red-900/50 hover:bg-red-900 text-red-400 rounded-lg transition",children:(0,r.jsx)(m.Z,{size:18})})]}):(0,r.jsx)("button",{onClick:()=>C(e),className:"p-2 text-cyan-600 hover:text-cyan-400 hover:bg-cyan-900/20 rounded-lg transition opacity-0 group-hover:opacity-100",children:(0,r.jsx)(b.Z,{size:18})})})]},e.uid))})]})})]})}},4499:function(e,t,s){"use strict";s.d(t,{I8:function(){return d},Vv:function(){return u},db:function(){return o},qe:function(){return c}});var r=s(6142),a=s(8121),n=s(7065),i=s(3493);let c={apiKey:"AIzaSyDVHiiCHkP-RFOI26cIrD_OijLnw1r3B8Q",authDomain:"spaceadventure-7d540.firebaseapp.com",projectId:"spaceadventure-7d540",storageBucket:"spaceadventure-7d540.firebasestorage.app",messagingSenderId:"546441300465",appId:"1:546441300465:web:28ae387d2bdbb8011a1c50",measurementId:"G-8R9PYL00XH"},l=(0,r.C6)().length>0?(0,r.Mq)():(0,r.ZF)(c),o=(0,a.ad)(l),d=(0,n.v0)(l),u=new n.hJ;(0,i.Gb)().then(e=>{e&&(0,i.IH)(l)})},7461:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var r=s(4090),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let s=(0,r.forwardRef)((s,i)=>{let{color:c="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:u="",children:h,...x}=s;return(0,r.createElement)("svg",{ref:i,...a,width:l,height:l,stroke:c,strokeWidth:d?24*Number(o)/Number(l):o,className:["lucide","lucide-".concat(n(e)),u].join(" "),...x},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(h)?h:[h]])});return s.displayName="".concat(e),s}},9259:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8994:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7731:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},3616:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]])},7326:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},1213:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2235:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[358,38,911,971,69,744],function(){return e(e.s=3630)}),_N_E=e.O()}]);